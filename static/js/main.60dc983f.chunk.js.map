{"version":3,"sources":["contexts/MyContextProvider.js","url_config.js","mocked_login.js","contexts/AuthContextProvider.js","components/PostForm.js","components/Form.js","components/Loader.js","components/Map.js","styled-components/ProfileImage.js","components/ReviewCard.js","components/Description.js","views/Location.js","views/App.js","views/Profile.js","Main.js","index.js","icons/012-camp.svg","icons/010-bonfire.svg","icons/009-binoculars.svg","icons/032-hut.svg"],"names":["MyContext","React","createContext","MyContextProvider","props","_useState","useState","_useState2","Object","slicedToArray","pointId","setPointId","_useState3","_useState4","mode","setMode","_useState5","_useState6","data","setData","_useState7","_useState8","lon","setLon","_useState9","_useState10","lat","setLat","_useState11","_useState12","cyclingOn","setCyclingOn","_useState13","_useState14","hikingOn","setHikingOn","_useState15","_useState16","hikebikeOn","setHikebikeOn","_useState17","_useState18","hillshadingOn","setHillshadingOn","state","getPointIdData","id","arguments","length","undefined","find","d","_id","switchMode","react_default","a","createElement","Provider","value","children","config","url","API_URL","app_id","FACEBOOK_APPID","mocked_login","isAuthenticated","user","picture","jwToken","AuthContext","AuthContextProvider","process","REACT_APP_LOGEDIN","setIsAuthenticated","mockedLogin","setUser","setPicture","setJwToken","PostForm","useContext","authContext","resetForm","inputs","reduce","acc","input","name","default","setState","handleChange","e","objectSpread","defineProperty","target","className","onSubmit","preventDefault","URLSearchParams","key","console","log","append","additionalInputs","fetch","apiPath","method","credentials","headers","Authorization","Content-Type","body","then","res","onSucessPost","formTitle","map","htmlFor","label","selectType","onChange","options","option","required","placeholder","type","buttonTitle","Form","context","components_PostForm","Loader","lib","size","color","loading","iconMapping","camping","bonfire","view","viewPoint","hut","Map","_this","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","cyclingLayer","hikingLayer","hikebikeLayer","center","getView","setCenter","fromLonLat","localisation","setZoom","_this2","extraLayer","VectorLayer","source","VectorSource","features","featuresLayer","geoIcon","Feature","geometry","Point","geolocationLayer","TileLayer","XYZ","hillshadingLayer","OlMap","refs","mapContainer","layers","OSM","View","zoom","geolocation","Geolocation","tracking","projection","getProjection","on","evt","coord","getPosition","getGeometry","setCoordinates","event","forEachFeatureAtPixel","pixel","feature","get","newPath","history","push","toLonLat","coordinate","star","Style","image","RegularShape","fill","Fill","stroke","Stroke","width","points","radius","radius2","angle","coords","newFeature","setStyle","setSource","_this3","setVisible","values_","isEmpty","json","forEach","icon","Icon","opacity","scale","src","iconStyle","iconFeature","description","rating","catch","error","components_Loader","ref","onClick","components_Form","Component","contextType","ProfileImage","styled","img","_templateObject","SmallProfileImage","_templateObject2","ReviewCard","title","profilePicture","alt","Description","reviews","setReviews","pointData","setPointData","useEffect","fetchReviews","rev","index","components_ReviewCard","dataForm","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","FormData","Symbol","iterator","next","done","pair","err","return","withCredentials","newRating","min","max","Location","pathPointId","location","pathname","match","components_Map","components_Description","App","switchText","handleInputChange","checked","href","redirect","react_router","path","component","Profile","profileData","setProfileData","locations","react_router_dom","to","favourites","Main","profileLink","basename","facebook_login_with_button_default","appId","autoLoad","fields","callback","response","concat","accessToken","cache","r","token","photoUrl","exact","ReactDOM","render","contexts_MyContextProvider","contexts_AuthContextProvider","src_Main","document","getElementById","module","exports","__webpack_require__","p"],"mappings":"oPACaA,EAAYC,IAAMC,cAAc,IAiD9BC,MA/Cf,SAA2BC,GAAO,IAAAC,EACFC,mBAAS,MADPC,EAAAC,OAAAC,EAAA,EAAAD,CAAAH,EAAA,GACzBK,EADyBH,EAAA,GAChBI,EADgBJ,EAAA,GAAAK,EAERN,mBAAS,WAFDO,EAAAL,OAAAC,EAAA,EAAAD,CAAAI,EAAA,GAEzBE,EAFyBD,EAAA,GAEnBE,EAFmBF,EAAA,GAAAG,EAGRV,mBAAS,MAHDW,EAAAT,OAAAC,EAAA,EAAAD,CAAAQ,EAAA,GAGzBE,EAHyBD,EAAA,GAGnBE,EAHmBF,EAAA,GAAAG,EAIVd,mBAAS,mBAJCe,EAAAb,OAAAC,EAAA,EAAAD,CAAAY,EAAA,GAIzBE,EAJyBD,EAAA,GAIpBE,EAJoBF,EAAA,GAAAG,EAKVlB,mBAAS,mBALCmB,EAAAjB,OAAAC,EAAA,EAAAD,CAAAgB,EAAA,GAKzBE,EALyBD,EAAA,GAKpBE,EALoBF,EAAA,GAAAG,EAMEtB,oBAAS,GANXuB,EAAArB,OAAAC,EAAA,EAAAD,CAAAoB,EAAA,GAMzBE,EANyBD,EAAA,GAMdE,EANcF,EAAA,GAAAG,EAOA1B,oBAAS,GAPT2B,EAAAzB,OAAAC,EAAA,EAAAD,CAAAwB,EAAA,GAOzBE,EAPyBD,EAAA,GAOfE,EAPeF,EAAA,GAAAG,EAQI9B,oBAAS,GARb+B,EAAA7B,OAAAC,EAAA,EAAAD,CAAA4B,EAAA,GAQzBE,EARyBD,EAAA,GAQbE,EARaF,EAAA,GAAAG,EASUlC,oBAAS,GATnBmC,EAAAjC,OAAAC,EAAA,EAAAD,CAAAgC,EAAA,GASzBE,EATyBD,EAAA,GASVE,EATUF,EAAA,GAqB1BG,EAAQ,CACZlC,UACAC,aACAkC,eARqB,WAAkB,IAAjBC,EAAiBC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAZrC,EAE3B,OADkBQ,EAAKgC,KAAK,SAAAC,GAAC,OAAIA,EAAEC,KAAON,KAQ1ChC,OACAC,UACAsC,WAhBiB,WAEjBtC,EADyB,YAATD,EAAqB,OAAS,YAgB9CI,OACAC,UACAG,MACAC,SACAG,MACAC,SACAG,YACAC,eACAG,WACAC,cACAG,aACAC,gBACAG,gBACAC,oBAEF,OACEW,EAAAC,EAAAC,cAACxD,EAAUyD,SAAX,CAAoBC,MAAOd,GAAQxC,EAAMuD,2BC9BhCC,EAhBA,CACTC,IAAK,CACDC,QAAS,4CAEbC,OAAQ,CACNC,eAAgB,oBCNPC,EAAA,CACbC,iBAAiB,EACjBC,KAAM,2BACNC,QAAS,kEACTC,QACE,+KCHSC,EAAcrE,IAAMC,cAAc,IAgChCqE,MA9Bf,SAA6BnE,GAAO,IAAAC,EACYC,qBAASkE,qDAAYC,mBADjClE,EAAAC,OAAAC,EAAA,EAAAD,CAAAH,EAAA,GAC3B6D,EAD2B3D,EAAA,GACVmE,EADUnE,EAAA,GAAAK,EAGVN,mBAASkE,qDAAYC,kBAC3CE,EAAYR,KACZ,MALgCtD,EAAAL,OAAAC,EAAA,EAAAD,CAAAI,EAAA,GAG3BuD,EAH2BtD,EAAA,GAGrB+D,EAHqB/D,EAAA,GAAAG,EAMJV,mBAASkE,qDAAYC,kBACjDE,EAAYP,QACZ,MARgCnD,EAAAT,OAAAC,EAAA,EAAAD,CAAAQ,EAAA,GAM3BoD,EAN2BnD,EAAA,GAMlB4D,EANkB5D,EAAA,GAAAG,EASJd,mBAASkE,qDAAYC,kBACjDE,EAAYN,QACZ,MAXgChD,EAAAb,OAAAC,EAAA,EAAAD,CAAAY,EAAA,GAa1BwB,EAAQ,CACZsB,kBACAQ,qBACAP,OACAS,UACAP,QAlB8BhD,EAAA,GAmB9ByD,WAnB8BzD,EAAA,GAoB9B+C,UACAS,cAEF,OACIvB,EAAAC,EAAAC,cAACc,EAAYb,SAAb,CAAsBC,MAAOd,GACxBxC,EAAMuD,WCqDJoB,MA7Ef,SAAkB3E,GACA4E,qBAAWhF,GAA3B,IACMiF,EAAcD,qBAAWV,GAEzBY,EAAY,WAChB,OAAO9E,EAAM+E,OAAOC,OAAO,SAACC,EAAKC,GAE/B,OADAD,EAAIC,EAAMC,MAAQD,EAAME,SAAY,GAC7BH,GACN,KARkBhF,EAWGC,mBAAS4E,KAXZ3E,EAAAC,OAAAC,EAAA,EAAAD,CAAAH,EAAA,GAWhBuC,EAXgBrC,EAAA,GAWTkF,EAXSlF,EAAA,GAajBmF,EAAe,SAACC,GACpBF,EAASjF,OAAAoF,EAAA,EAAApF,CAAA,GAAKoC,EAANpC,OAAAqF,EAAA,EAAArF,CAAA,GAAcmF,EAAEG,OAAOhD,GAAK6C,EAAEG,OAAOpC,UAgC/C,OACEJ,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,QAAMuC,UAAU,YAAYC,SA/BV,SAACL,GACrBA,EAAEM,iBAEF,IAAM/E,EAAO,IAAIgF,gBACjB,IAAK,IAAMC,KAAOvD,EAChBwD,QAAQC,IAAIF,EAAKvD,EAAMuD,IACvBjF,EAAKoF,OAAOH,EAAKvD,EAAMuD,IAEzB,IAAK,IAAMA,KAAO/F,EAAMmG,iBACtBH,QAAQC,IAAIF,EAAK/F,EAAMmG,iBAAiBJ,IACxCjF,EAAKoF,OAAOH,EAAK/F,EAAMmG,iBAAiBJ,IAG1CK,MAAM5C,EAAOC,IAAIC,QAAU1D,EAAMqG,QAAS,CACxCC,OAAQ,OACRC,YAAa,UACbC,QAAS,CACPC,cAAiB,UAAY5B,EAAYZ,QACzCyC,eAAgB,qCAElBC,KAAM7F,IAEL8F,KAAK,SAAAC,GACJxB,EAASP,KACV9E,EAAM8G,cAAgB9G,EAAM8G,aAAaD,OASxC3D,EAAAC,EAAAC,cAAA,OAAKuC,UAAU,iBACbzC,EAAAC,EAAAC,cAAA,UAAKpD,EAAM+G,YAEb7D,EAAAC,EAAAC,cAAA,OAAKuC,UAAU,OACZ3F,EAAM+E,OAAOiC,IAAI,SAAA9B,GAChB,OACEhC,EAAAC,EAAAC,cAAA,OAAKuC,UAAU,SAASI,IAAKb,EAAMC,MACjCjC,EAAAC,EAAAC,cAAA,SAAO6D,QAAS/B,EAAMC,MAAOD,EAAMgC,OAClChC,EAAMiC,WACLjE,EAAAC,EAAAC,cAAA,UAAQuC,UAAU,wBAAwBjD,GAAIwC,EAAMC,KAAMA,KAAMD,EAAMC,KAAM7B,MAAOd,EAAM0C,EAAMC,MAAOiC,SAAU9B,GAC7GJ,EAAMmC,QAAQL,IAAI,SAAAM,GAAM,OAAIpE,EAAAC,EAAAC,cAAA,UAAQ2C,IAAKuB,GAASA,MAGrDpE,EAAAC,EAAAC,cAAA,SAAOmE,SAAUrC,EAAMqC,SAAU5B,UAAU,wBAAwB6B,YAAatC,EAAMsC,YAAaC,KAAMvC,EAAMuC,KAAMtC,KAAMD,EAAMC,KAAMzC,GAAIwC,EAAMC,KAAM7B,MAAOd,EAAM0C,EAAMC,MAAOiC,SAAU9B,QAMrMpC,EAAAC,EAAAC,cAAA,OAAKuC,UAAU,iBACbzC,EAAAC,EAAAC,cAAA,UAAQqE,KAAK,SAAS9B,UAAU,uBAAuB3F,EAAM0H,iBCzBxDC,MA9Cf,SAAc3H,GAEZ,IAAM4H,EAAUhD,qBAAWhF,GAMrBuG,EAAmB,CACvBjF,IAAK0G,EAAQ1G,IACbI,IAAKsG,EAAQtG,KA4Bf,MACmB,YAAjBsG,EAAQlH,KAAqB,KAC7BwC,EAAAC,EAAAC,cAACyE,EAAD,CAAUf,aApCS,kBAAMc,EAAQ7G,QAAQ,OAoCHsF,QAnCxB,cAoCdU,UAnCgB,sCAmCMZ,iBAAkBA,EACxCpB,OA7Ba,CACb,CACEI,KAAM,OACN+B,MAAO,QACPK,UAAU,EACVC,YAAa,aACbC,KAAM,QAER,CACEtC,KAAM,cACN+B,MAAO,eACPK,UAAU,EACVC,YAAa,mBACbC,KAAM,QAER,CACEtC,KAAM,OACN+B,MAAO,eACPC,YAAY,EACZE,QAAS,CAAC,UAAW,UAAW,OAAQ,OACxCjC,QAAS,YASKsC,YANE,4BC1BPI,MAVf,SAAgB9H,GACZ,OACIkD,EAAAC,EAAAC,cAAC2E,EAAA,YAAD,CACAC,KAAMhI,EAAMgI,KACZC,MAAM,UACNC,QAASlI,EAAMkI,gOCoBjBzE,EAAMD,EAAOC,IAAIC,QAEjByE,EAAc,CAClBC,YACAC,YACAC,KAAMC,IACNC,SAIIC,cAEJ,SAAAA,EAAYzI,GAAM,IAAA0I,EAAA,OAAAtI,OAAAuI,EAAA,EAAAvI,CAAAwI,KAAAH,IAChBC,EAAAtI,OAAAyI,EAAA,EAAAzI,CAAAwI,KAAAxI,OAAA0I,EAAA,EAAA1I,CAAAqI,GAAAM,KAAAH,KAAM5I,KACDgH,IAAM,KACX0B,EAAKM,aAAe,KACpBN,EAAKO,YAAc,KACnBP,EAAKQ,cAAgB,KAErBR,EAAKS,OAAS,WACZT,EAAK1B,IAAIoC,UAAUC,UAAUC,YAAWZ,EAAKd,QAAQnF,iBAAiB8G,eACtEb,EAAK1B,IAAIoC,UAAUI,QAAQ,KATbd,mFAaE,IAAAe,EAAAb,KACZc,EAAa,IAAIC,IAAY,CACjCC,OAAQ,IAAIC,IAAa,CACvBC,SAAU,OAGRC,EAAgB,IAAIJ,IAAY,CACpCC,OAAQ,IAAIC,IAAa,CACvBC,SAAU,OAIRE,EAAU,IAAIC,IAAQ,CAC1BC,SAAU,IAAIC,IAAM,MAGhBC,EAAmB,IAAIT,IAAY,CACvCC,OAAQ,IAAIC,IAAa,CACvBC,SAAU,CAACE,OAIfpB,KAAKI,aAAe,IAAIqB,IAAU,CAChCT,OAAQ,IAAIU,IAAI,CACd7G,IAAK,8DAITmF,KAAKK,YAAc,IAAIoB,IAAU,CAC/BT,OAAQ,IAAIU,IAAI,CACd7G,IAAK,6DAITmF,KAAKM,cAAgB,IAAImB,IAAU,CACjCT,OAAQ,IAAIU,IAAI,CACd7G,IAAK,wDAITmF,KAAK2B,iBAAmB,IAAIF,IAAU,CACpCT,OAAQ,IAAIU,IAAI,CACd7G,IAAK,2DAITmF,KAAK5B,IAAM,IAAIwD,IAAM,CACnB9E,OAAQkD,KAAK6B,KAAKC,aAClBC,OAAQ,CACN,IAAIN,IAAU,CACZT,OAAQ,IAAIgB,MAEdhC,KAAKM,cACLN,KAAKK,YACLL,KAAKI,aACLJ,KAAK2B,iBACLb,EACAK,EACAK,GACC9B,KAAM,IAAIuC,IAAK,CAChB1B,OAAQG,YAAW,CAACV,KAAKhB,QAAQ1G,IAAK0H,KAAKhB,QAAQtG,MACnDwJ,KAAM,MAIV,IAAMC,EAAc,IAAIC,IAAY,CAClCC,UAAU,EACVC,WAAYtC,KAAK5B,IAAIoC,UAAU+B,kBAGjCJ,EAAYK,GAAG,SAAU,SAASC,GAChC,IAAMC,EAAQP,EAAYQ,cAC1BvB,EAAQwB,cAAcC,eAAeH,KAmDvC1C,KAAK5B,IAAIoE,GAAG,QAhDW,SAACM,GACtB,GAA0B,YAAtBjC,EAAK7B,QAAQlH,KAAoB,CACnC,IAAIJ,EAAU,KACdmJ,EAAKzC,IAAI2E,sBAAsBD,EAAME,MACnC,SAAAC,GACEvL,EAAUuL,EAAQC,IAAI,OAAS,OAGnC,IAAMC,EAAsB,OAAZzL,EACd,aACA,aAAeA,EACjBmJ,EAAKzJ,MAAMgM,QAAQC,KAAKF,QAEnB,GAA0B,SAAtBtC,EAAK7B,QAAQlH,KAAiB,CAEvC,IAAM4K,EAAQY,YAASR,EAAMS,YAC7B1C,EAAK7B,QAAQzG,OAAOmK,EAAM,IAC1B7B,EAAK7B,QAAQrG,OAAO+J,EAAM,IAE1B,IAAMc,EAAO,IAAIC,IAAM,CACrBC,MAAO,IAAIC,IAAa,CACtBC,KAAM,IAAIC,IAAK,CAACxE,MAAO,SACvByE,OAAQ,IAAIC,IAAO,CAAC1E,MAAO,UAAW2E,MAAO,IAC7CC,OAAQ,GACRC,OAAQ,GACRC,QAAS,EACTC,MAAO,MAILlD,EAAW,GAEXmD,EAASvB,EAAMS,WACfe,EAAa,IAAIjD,IAAQ,CAC7BC,SAAU,IAAIC,IAAM8C,KAGtBC,EAAWC,SAASf,GAEpBtC,EAASmC,KAAKiB,GAEdzD,EAAKjH,MAAMkH,WAAW0D,UACpB,IAAIvD,IAAa,CACfC,SAAUA,QAOlBlB,KAAKvD,SAAS,CACZqE,aACAK,gBACAC,yDAIiB,IAAAqD,EAAAzE,KACnBA,KAAKI,aAAasE,WAAW1E,KAAKhB,QAAQlG,WAC1CkH,KAAKK,YAAYqE,WAAW1E,KAAKhB,QAAQ9F,UACzC8G,KAAKM,cAAcoE,WAAW1E,KAAKhB,QAAQ1F,YAC3C0G,KAAK2B,iBAAiB+C,WAAW1E,KAAKhB,QAAQtF,gBAEpB,OAAtBsG,KAAKhB,QAAQ9G,MAAgB8H,KAAKpG,MAAMuH,cAAcwD,QAAQ3D,OAAO4D,YACvEpH,MAAM3C,EAAM,eACTmD,KAAK,SAAAC,GAAG,OAAIA,EAAI4G,SAChB7G,KAAK,SAAA9F,GACJ,IAAMgJ,EAAW,GACjBhJ,EAAK4M,QAAQ,SAACnI,GACZ,IAAMoI,EAAO,IAAIC,IAAK,CACpBC,QAAS,EACTC,MAAO,IACPC,IAAK5F,EAAY5C,EAAEkC,QAGfuG,EAAY,IAAI3B,IAAM,CAC1BC,MAAOqB,IAGHV,EAAS3D,YAAW/D,EAAEgE,cACtB0E,EAAc,IAAIhE,IAAQ,CAC9BvH,GAAI6C,EAAEvC,IACNkH,SAAU,IAAIC,IAAM8C,GACpB9H,KAAMI,EAAEJ,KACR+I,YAAa3I,EAAE2I,YACfC,OAAQ5I,EAAE4I,SAEZF,EAAYd,SAASa,GACrBlE,EAASmC,KAAKgC,KAGhBZ,EAAK7K,MAAMuH,cAAcqD,UACvB,IAAIvD,IAAa,CACfC,SAAUA,KAGduD,EAAKzF,QAAQ7G,QAAQD,KAEtBsN,MAAM,SAAAC,GAAK,OAAIrI,QAAQC,IAAIoI,sCAMhC,OACEnL,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAACkL,EAAD,CAAQtG,KAAM,IAAKE,SAAUU,KAAKhB,QAAQ9G,OAC1CoC,EAAAC,EAAAC,cAAA,OAAKmL,IAAI,eAAe7L,GAAG,iBACxBkG,KAAKhB,QAAQtH,SAAiC,SAAtBsI,KAAKhB,QAAQlH,KAExCwC,EAAAC,EAAAC,cAAA,UAAQoL,QAAS5F,KAAKO,QAAtB,sBADF,GAGEjG,EAAAC,EAAAC,cAACqL,EAAD,cA1MU5O,IAAM6O,WAgNxBjG,EAAIkG,YAAc/O,EACH6I,6RCtPR,IAAMmG,GAAeC,WAAOC,IAAVC,MAMZC,GAAoBH,WAAOC,IAAVG,MCcfC,OAjBf,SAAoBlP,GAClB,IAAM6E,EAAcD,qBAAWV,GAE/B,OACEhB,EAAAC,EAAAC,cAAA,OAAKuC,UAAU,kCACbzC,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAAA,UAAKpD,EAAMuF,EAAE4J,OACbjM,EAAAC,EAAAC,cAAA,aAAKpD,EAAMuF,EAAE2I,YAAb,KACAhL,EAAAC,EAAAC,cAAA,oBAAYpD,EAAMuF,EAAE4I,QACnBtJ,EAAYf,gBACXZ,EAAAC,EAAAC,cAAC4L,GAAD,CAAmBjB,IAAK/N,EAAMuF,EAAE6J,eAAgBC,IAAI,YAAe,KCRrE5L,GAAMD,EAAOC,IAAIC,QAwGR4L,OAtGf,SAAqBtP,GACnB,IAAM4H,EAAUhD,qBAAWhF,GACrBiF,EAAcD,qBAAWV,GAFLjE,EAIIC,mBAAS,IAJbC,EAAAC,OAAAC,EAAA,EAAAD,CAAAH,EAAA,GAInBsP,EAJmBpP,EAAA,GAIVqP,EAJUrP,EAAA,GAAAK,EAKQN,mBAAS,MALjBO,EAAAL,OAAAC,EAAA,EAAAD,CAAAI,EAAA,GAKnBiP,EALmBhP,EAAA,GAKRiP,EALQjP,EAAA,GAO1BkP,oBAAU,WAER,GADAH,EAAW,IACP5H,EAAQ9G,KAAM,CAChB,IAAM2O,EAAY7H,EAAQ9G,KAAKgC,KAAK,SAAAyC,GAAC,OACnCA,EAAEvC,MAAQ4E,EAAQtH,UACpBoP,EAAaD,KAEd,CAAC7H,EAAQ9G,KAAM8G,EAAQtH,UAE1B,IAAMsP,EAAe,WACnBxJ,MAAM3C,GAAM,eAAiBmE,EAAQtH,SAClCsG,KAAK,SAAAC,GAAG,OAAIA,EAAI4G,SAChB7G,KAAK,SAAAC,GACJ,IAAMgJ,EAAMhJ,EAAIG,IAAI,SAACzB,EAAGuK,GACtB,OACC5M,EAAAC,EAAAC,cAAC2M,GAAD,CAAYxK,EAAGA,EAAGQ,IAAK+J,MAG1BN,EAAWK,MA4BjB,OACIJ,GAA8B,SAAjB7H,EAAQlH,KAErBwC,EAAAC,EAAAC,cAAA,OAAKuC,UAAU,uBACbzC,EAAAC,EAAAC,cAAA,UACGqM,EAAUtK,MAEbjC,EAAAC,EAAAC,cAAA,SACGqM,EAAUvB,aAEbhL,EAAAC,EAAAC,cAAA,qBACWqM,EAAUtB,QAEpBtJ,EAAYf,gBACXZ,EAAAC,EAAAC,cAAA,wBACcF,EAAAC,EAAAC,cAAC4L,GAAD,CAAmBjB,IAAK0B,EAAUL,eAAgBC,IAAI,aAC7D,GAGTnM,EAAAC,EAAAC,cAAA,UAAQqE,KAAK,QAAQ+G,QAASoB,EAAcjK,UAAU,uBAAtD,gBAEC4J,EAEA1K,EAAYf,gBACXZ,EAAAC,EAAAC,cAAA,QAAMuC,UAAU,YAAYC,SAhDf,SAACL,GACpBA,EAAEM,iBACF,IAAMmK,EAAW,IAAIlK,gBAFKmK,GAAA,EAAAC,GAAA,EAAAC,OAAAtN,EAAA,IAG1B,QAAAuN,EAAAC,EAAmB,IAAIC,SAAS/K,EAAEG,QAAlC6K,OAAAC,cAAAP,GAAAG,EAAAC,EAAAI,QAAAC,MAAAT,GAAA,EAA2C,KAAhCU,EAAgCP,EAAA9M,MACzC0M,EAAS9J,OAAOyK,EAAK,GAAIA,EAAK,KAJN,MAAAC,GAAAV,GAAA,EAAAC,EAAAS,EAAA,YAAAX,GAAA,MAAAI,EAAAQ,QAAAR,EAAAQ,SAAA,WAAAX,EAAA,MAAAC,GAO1B/J,MAAM3C,GAAM,eAAiBmE,EAAQtH,QAAS,CAC5CgG,OAAQ,OACRE,QAAS,CACPC,cAAiB,UAAY5B,EAAYZ,QACzCyC,eAAgB,qCAElBC,KAAMqJ,EACNc,iBAAiB,EACjBvK,YAAa,YAEZK,KAAK,SAAAC,GAAG,OAAIA,EAAI4G,SAChB7G,KAAK,SAACC,GACL6I,EAAatP,OAAAoF,EAAA,EAAApF,CAAA,GAAKqP,EAAN,CAAiBtB,OAAQtH,EAAIkK,aACzCnB,QA6BI1M,EAAAC,EAAAC,cAAA,OAAKuC,UAAU,OACbzC,EAAAC,EAAAC,cAAA,OAAKuC,UAAU,UACbzC,EAAAC,EAAAC,cAAA,SAAO6D,QAAQ,SAAf,UACA/D,EAAAC,EAAAC,cAAA,SAAOuC,UAAU,wBAAwB6B,YAAY,QAAQD,UAAQ,EAACpC,KAAK,QAAQzC,GAAG,WAExFQ,EAAAC,EAAAC,cAAA,OAAKuC,UAAU,UACbzC,EAAAC,EAAAC,cAAA,SAAO6D,QAAQ,eAAf,gBACA/D,EAAAC,EAAAC,cAAA,SAAOuC,UAAU,wBAAwB6B,YAAY,cAAcrC,KAAK,cAAczC,GAAG,iBAE3FQ,EAAAC,EAAAC,cAAA,OAAKuC,UAAU,UACbzC,EAAAC,EAAAC,cAAA,SAAO6D,QAAQ,UAAf,WACA/D,EAAAC,EAAAC,cAAA,SAAOuC,UAAU,wBAAwB6B,YAAY,OAAOD,UAAQ,EAACyJ,IAAI,IAAIC,IAAI,KAAK9L,KAAK,SAASzC,GAAG,SAAS+E,KAAK,aAGzHvE,EAAAC,EAAAC,cAAA,OAAKuC,UAAU,iBACbzC,EAAAC,EAAAC,cAAA,UAAQqE,KAAK,SAAS9B,UAAU,wBAAhC,YAEM,IAxCd,ICbSuL,OA1Cf,SAAkBlR,GAChB,IAAM4H,EAAUhD,qBAAWhF,GACrBiF,EAAcD,qBAAWV,GA2B/B,OAxBAyL,oBAAU,WACR,IAAMwB,EAAcnR,EAAMoR,SAASC,SAASC,MAAM,WAChDtR,EAAMoR,SAASC,SAASC,MAAM,WAAU,GAAK,KAC3C1J,EAAQtH,UAAY6Q,GAA+B,aAAhBA,GACrCvJ,EAAQrH,WAAW4Q,IAEpB,CAACnR,EAAMoR,SAASC,WAmBjBnO,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAACmO,EAAD,CAAKvF,QAAShM,EAAMgM,UACjBnH,EAAYf,iBAAoB8D,EAAQtH,SAA4B,SAAjBsH,EAAQlH,KAE9DwC,EAAAC,EAAAC,cAAA,UAAQoL,QArBY,WACtB,IAAM1N,EAAO,IAAIgF,gBACjBhF,EAAKoF,OAAO,aAAc0B,EAAQtH,SAClC8F,MAAM5C,EAAOC,IAAIC,QAAU,2BAA4B,CACnD4C,OAAQ,OACRE,QAAS,CACPC,cAAiB,UAAY5B,EAAYZ,QACzCyC,eAAgB,qCAElBC,KAAM7F,IAEL8F,KAAK,SAACC,GACLb,QAAQC,IAAIY,OAShB,qBADA,GAIA3D,EAAAC,EAAAC,cAACoO,GAAD,iBC0CSC,OAjFf,WACE,IAAM7J,EAAUhD,qBAAWhF,GACrBiF,EAAcD,qBAAWV,GAEzBwN,EAA8B,YAAjB9J,EAAQlH,KAAqB,WAAa,UAEvDiR,EAAoB,SAAAjG,GACxB,IAAMhG,EAASgG,EAAMhG,OACfpC,EAAQoC,EAAOkM,QAGrB,OAFalM,EAAOP,MAGlB,IAAK,YACH,OAAOyC,EAAQjG,aAAa2B,GAC9B,IAAK,WACH,OAAOsE,EAAQ7F,YAAYuB,GAC7B,IAAK,aACH,OAAOsE,EAAQzF,cAAcmB,GAC/B,IAAK,gBACH,OAAOsE,EAAQrF,iBAAiBe,GAClC,QACE,SAIN,OACEJ,EAAAC,EAAAC,cAAA,OAAKuC,UAAU,OACZd,EAAYf,gBACXZ,EAAAC,EAAAC,cAAA,UAAQV,GAAG,eAAe8L,QAAS5G,EAAQ3E,YACxCyO,GAED,KAEJxO,EAAAC,EAAAC,cAAA,QAAMV,GAAG,UACPQ,EAAAC,EAAAC,cAAA,aACEF,EAAAC,EAAAC,cAAA,KAAGyO,KAAK,wCAAR,0BAC0B,KAE1B3O,EAAAC,EAAAC,cAAA,SACE+B,KAAK,YACLsC,KAAK,WACLmK,QAAShK,EAAQlG,UACjB0F,SAAUuK,KAGdzO,EAAAC,EAAAC,cAAA,aACEF,EAAAC,EAAAC,cAAA,KAAGyO,KAAK,uCAAR,yBACyB,KAEzB3O,EAAAC,EAAAC,cAAA,SACE+B,KAAK,WACLsC,KAAK,WACLnE,MAAOsE,EAAQ9F,SACfsF,SAAUuK,KAGdzO,EAAAC,EAAAC,cAAA,aACEF,EAAAC,EAAAC,cAAA,KAAGyO,KAAK,0BAAR,sBACA3O,EAAAC,EAAAC,cAAA,SACE+B,KAAK,aACLsC,KAAK,WACLnE,MAAOsE,EAAQ1F,WACfkF,SAAUuK,KAGdzO,EAAAC,EAAAC,cAAA,aACEF,EAAAC,EAAAC,cAAA,KAAGyO,KAAK,0BAAR,wBACA3O,EAAAC,EAAAC,cAAA,SACE+B,KAAK,gBACLsC,KAAK,WACLnE,MAAOsE,EAAQtF,cACf8E,SAAUuK,MAIf/J,EAAQkK,SACT5O,EAAAC,EAAAC,cAAC2O,GAAA,EAAD,CAAOC,KAAK,IAAIC,UAAWf,gBC5E3BzN,GAAMD,EAAOC,IAAIC,QAqDRwO,OAlDf,SAAiBlS,GACf,IAAM6E,EAAcD,qBAAWV,GACzB0D,EAAUhD,qBAAWhF,GAFLK,EAIgBC,mBAAS,MAJzBC,EAAAC,OAAAC,EAAA,EAAAD,CAAAH,EAAA,GAIfkS,EAJehS,EAAA,GAIFiS,EAJEjS,EAAA,GAyBtB,OAnBK0E,EAAYf,iBACf9D,EAAMgM,QAAQC,KAAK,KAGrB0D,oBAAU,WACRvJ,MAAM3C,GAAM,gBAAiB,CAC3B6C,OAAQ,MACRC,YAAa,UACbC,QAAS,CACPC,cAAiB,UAAY5B,EAAYZ,WAG1C2C,KAAK,SAAAC,GAAG,OAAIA,EAAI4G,SAChB7G,KAAK,SAAA9F,GACJsR,EAAetR,MAGlB,IAIDoC,EAAAC,EAAAC,cAAA,OAAKuC,UAAU,WACZwM,EACDjP,EAAAC,EAAAC,cAAA,OAAKuC,UAAU,uBACbzC,EAAAC,EAAAC,cAAA,UAAK+O,EAAYpO,KAAKoB,MACtBjC,EAAAC,EAAAC,cAAA,6BAEC+O,EAAYE,UAAUrL,IAAI,SAAAoK,GACzB,OAASlO,EAAAC,EAAAC,cAACkP,GAAA,EAAD,CAAMC,GAAI,aAAanB,EAASpO,IAAK+C,IAAKqL,EAASjM,MAAOiM,EAASjM,QAE5EjC,EAAAC,EAAAC,cAAA,8BAED+O,EAAYpO,KAAKyO,WAAWxL,IAAI,SAAAoK,GAC/B,OAASlO,EAAAC,EAAAC,cAACkP,GAAA,EAAD,CAAMC,GAAI,aAAanB,EAAUrL,IAAKqL,EAASjM,MAAOyC,EAAQnF,eAAe2O,GAAUjM,SAIlGjC,EAAAC,EAAAC,cAACkL,EAAD,CAAQtG,KAAM,GAAIE,SAAS,2BC3C7BzE,GAAMD,EAAOC,IAAIC,QAmFR+O,OAhFf,WACE,IAAM5N,EAAcD,qBAAWV,GACzB0D,EAAUhD,qBAAWhF,GAoCrB8S,EAAc7N,EAAYb,QAChCd,EAAAC,EAAAC,cAACwL,GAAD,CAAcb,IAAKlJ,EAAYb,QAASqL,IAAI,YAAe,UAE3D,OAEInM,EAAAC,EAAAC,cAACkP,GAAA,EAAD,CAAQK,SAAUvO,WAChBlB,EAAAC,EAAAC,cAAA,OAAKuC,UAAU,8BAEZzC,EAAAC,EAAAC,cAACkP,GAAA,EAAD,CAAMC,GAAG,aAAYrP,EAAAC,EAAAC,cAAA,MAAIuC,UAAU,oBAAd,WAKrBd,EAAYf,gBACbZ,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,UAAQoL,QAjDH,WACb3J,EAAYP,oBAAmB,GAC/BO,EAAYL,QAAQ,MACpBK,EAAYH,WAAW,MACvBkD,EAAQjH,QAAQ,YA6CiBgF,UAAU,UAAnC,WAGCzC,EAAAC,EAAAC,cAACkP,GAAA,EAAD,CAAMC,GAAG,YAAYG,IAGtBxP,EAAAC,EAAAC,cAACwP,GAAAzP,EAAD,CACE0P,MAAOrP,EAAOG,OAAOC,eACrBkP,UAAU,EACVC,OAAO,qBACPC,SApDa,SAACC,GAGxB,IAAM5L,EAAU,CACdf,OAAQ,OACRK,KAAI,gBAAAuM,OAAkBD,EAASE,aAC/B3M,QAAS,CACPE,eAAgB,qCAElBhG,KAAM,OACN0S,MAAO,WAGThN,MAAM3C,GAAM,qBAAsB4D,GAC/BT,KAAK,SAAAyM,GACJ,IAAMC,EAAQD,EAAE7M,QAAQsF,IAAI,gBAC5BuH,EAAE5F,OAAO7G,KAAK,SAAA7C,GACRuP,IACFzO,EAAYP,oBAAmB,GAC/BO,EAAYL,QAAQT,EAAKf,KACzB6B,EAAYH,WAAW4O,GACvBzO,EAAYJ,WAAWV,EAAKwP,mBAqChCrQ,EAAAC,EAAAC,cAAC2O,GAAA,EAAD,KACE7O,EAAAC,EAAAC,cAAC2O,GAAA,EAAD,CAAOC,KAAK,YAAYC,UAAWR,KACnCvO,EAAAC,EAAAC,cAAC2O,GAAA,EAAD,CAAOyB,OAAK,EAACxB,KAAK,KAChB9O,EAAAC,EAAAC,cAAC2O,GAAA,EAAD,CAAUQ,GAAG,eAEfrP,EAAAC,EAAAC,cAAC2O,GAAA,EAAD,CAAOC,KAAK,WAAWC,UAAWC,sBC9E5CuB,IAASC,OACPxQ,EAAAC,EAAAC,cAACuQ,EAAD,KACEzQ,EAAAC,EAAAC,cAACwQ,EAAD,KACE1Q,EAAAC,EAAAC,cAACyQ,GAAD,QAGFC,SAASC,eAAe,6BCf5BC,EAAAC,QAAiBC,EAAAC,EAAuB,yDCAxCH,EAAAC,QAAiBC,EAAAC,EAAuB,4DCAxCH,EAAAC,QAAiBC,EAAAC,EAAuB,+DCAxCH,EAAAC,QAAiBC,EAAAC,EAAuB","file":"static/js/main.60dc983f.chunk.js","sourcesContent":["import React, { useState } from \"react\";\nexport const MyContext = React.createContext({});\n\nfunction MyContextProvider(props) {\n  const [pointId, setPointId] = useState(null);\n  const [mode, setMode] = useState(\"explore\");\n  const [data, setData] = useState(null);\n  const [lon, setLon] = useState(17.86208324183244);\n  const [lat, setLat] = useState(59.30184823106963);\n  const [cyclingOn, setCyclingOn] = useState(false);\n  const [hikingOn, setHikingOn] = useState(false);\n  const [hikebikeOn, setHikebikeOn] = useState(false);\n  const [hillshadingOn, setHillshadingOn] = useState(false);\n\n  const switchMode = () => {\n    const newMode = mode === \"explore\" ? \"edit\" : \"explore\";\n    setMode(newMode);\n  };\n\n  const getPointIdData = (id = pointId) => {\n    const pointData = data.find(d => d._id == id);\n    return pointData;\n  };\n\n  const state = {\n    pointId,\n    setPointId,\n    getPointIdData,\n    mode,\n    setMode,\n    switchMode,\n    data,\n    setData,\n    lon,\n    setLon,\n    lat,\n    setLat,\n    cyclingOn,\n    setCyclingOn,\n    hikingOn,\n    setHikingOn,\n    hikebikeOn,\n    setHikebikeOn,\n    hillshadingOn,\n    setHillshadingOn\n  };\n  return (\n    <MyContext.Provider value={state}>{props.children}</MyContext.Provider>\n  );\n}\nexport default MyContextProvider;\n","\nconst prod = {\n    url: {\n        API_URL: 'https://db-truso-map-space.herokuapp.com'\n    },\n    app_id: {\n      FACEBOOK_APPID: '383464965621720'\n    }\n};\nconst dev = {\n    url: {\n        API_URL: 'http://localhost:8000'\n    },\n    app_id: {\n      FACEBOOK_APPID: '878158445910684'\n    }\n};\nexport const config = process.env.NODE_ENV === 'development' ? dev: prod;","export default {\n  isAuthenticated: true,\n  user: \"5d2cd2dd1a88bd3129ed41cd\",\n  picture: \"https://graph.facebook.com/10219128370309728/picture?type=large\",\n  jwToken:\n    \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkMmNkMmRkMWE4OGJkMzEyOWVkNDFjZCIsImlhdCI6MTU2MzY1NjM5MiwiZXhwIjoxNTYzNjYzNTkyfQ.oS_qwR9qmT183NoKemPAuWRCSiK1tIgapdwdKkFupv4\"\n};\n","import React, { useState } from 'react'\nimport mockedLogin from '../mocked_login';\nexport const AuthContext = React.createContext({})\n\nfunction AuthContextProvider(props) {\n  const [isAuthenticated, setIsAuthenticated] = useState(process.env.REACT_APP_LOGEDIN ? \n    true: false);\n  const [user, setUser] = useState(process.env.REACT_APP_LOGEDIN ? \n    mockedLogin.user :\n    null);\n  const [picture, setPicture] = useState(process.env.REACT_APP_LOGEDIN ? \n    mockedLogin.picture :\n    null);\n  const [jwToken, setJwToken] = useState(process.env.REACT_APP_LOGEDIN ? \n    mockedLogin.jwToken :\n    null);\n\n    const state = {\n      isAuthenticated,\n      setIsAuthenticated,\n      user,\n      setUser,\n      jwToken,\n      setJwToken,\n      picture,\n      setPicture\n    }\n    return (\n        <AuthContext.Provider value={state}>\n            {props.children}\n        </AuthContext.Provider>\n    )\n\n}\nexport default AuthContextProvider\n","import React, { useContext, useState, useEffect } from 'react';\nimport { config } from '../url_config'\nimport { MyContext } from '../contexts/MyContextProvider';\nimport { AuthContext } from '../contexts/AuthContextProvider';\n\nfunction PostForm(props) {\n  const context = useContext(MyContext);\n  const authContext = useContext(AuthContext);\n\n  const resetForm = ()=> {\n    return props.inputs.reduce((acc, input) => {\n      acc[input.name] = input.default ||  '' ;\n      return acc;\n    }, {});\n  }\n\n  const [state, setState] = useState(resetForm());\n\n  const handleChange = (e) => {\n    setState({ ...state, [e.target.id]: e.target.value });\n  }\n\n  const SubmitHandler = (e) => {\n    e.preventDefault();\n\n    const data = new URLSearchParams();\n    for (const key in state) {\n      console.log(key, state[key])\n      data.append(key, state[key]);\n    }\n    for (const key in props.additionalInputs) {\n      console.log(key, props.additionalInputs[key])\n      data.append(key, props.additionalInputs[key]);\n    }\n\n    fetch(config.url.API_URL + props.apiPath, {\n      method: 'POST',\n      credentials: 'include',\n      headers: {\n        'Authorization': 'Bearer ' + authContext.jwToken,\n        'Content-Type': 'application/x-www-form-urlencoded'\n      },\n      body: data\n    })\n      .then(res => {\n        setState(resetForm());\n       props.onSucessPost && props.onSucessPost(res);\n      })\n  }\n\n\n  return (\n    <div>\n      <form className=\"container\" onSubmit={SubmitHandler} >\n\n        <div className=\"flexcontainer\">\n          <h3>{props.formTitle}</h3>\n        </div>\n        <div className=\"row\">\n          {props.inputs.map(input => {\n            return (\n              <div className=\"col-sm\" key={input.name}>\n                <label htmlFor={input.name}>{input.label}</label>\n                {input.selectType ?\n                  <select className=\"form-control input-sm\" id={input.name} name={input.name} value={state[input.name]} onChange={handleChange}>\n                    {input.options.map(option => <option key={option}>{option}</option>)}\n                  </select>\n                  :\n                  <input required={input.required} className=\"form-control input-sm\" placeholder={input.placeholder} type={input.type} name={input.name} id={input.name} value={state[input.name]} onChange={handleChange}></input>\n                }\n              </div>\n            )\n          })}\n        </div>\n        <div className=\"flexcontainer\">\n          <button type=\"submit\" className=\"btn btn-dark btn-bg\">{props.buttonTitle}</button>\n        </div>\n      </form>\n    </div >\n  )\n}\n\nexport default PostForm;","import React, { useContext } from 'react';\nimport { MyContext } from '../contexts/MyContextProvider';\nimport PostForm from './PostForm';\n\nfunction Form(props) {\n\n  const context = useContext(MyContext);\n\n  const onSucessPost = () => context.setData(null);\n  const apiPath = '/api/points'\n  const formTitle = 'Click on the map and add a new spot'\n  \n  const additionalInputs = {\n    lon: context.lon,\n    lat: context.lat\n  }\n  \n  const inputs = [\n    {\n      name: 'name',\n      label: 'Name:',\n      required: true,\n      placeholder: 'place name',\n      type: 'text',\n    },\n    {\n      name: 'description',\n      label: 'Description:',\n      required: false,\n      placeholder: 'place decription',\n      type: 'text',\n    },\n    {\n      name: 'type',\n      label: 'Select type:',\n      selectType: true,\n      options: ['camping', 'bonfire', 'view', 'hut'],\n      default: 'camping'\n    }\n  ]\n  const buttonTitle = 'Add to the map';\n\n  return (\n    context.mode === 'explore' ? null :\n    <PostForm onSucessPost={onSucessPost} apiPath={apiPath}\n    formTitle={formTitle} additionalInputs={additionalInputs}\n    inputs={inputs} buttonTitle={buttonTitle} />\n  )\n \n}\nexport default Form;","import { BallSpinner } from \"react-spinners-kit\";\nimport React from 'react';\n\n\nfunction Loader(props){\n    return (\n        <BallSpinner\n        size={props.size}\n        color=\"#686769\"\n        loading={props.loading}\n    />\n    );\n}\n\nexport default Loader;","import React from 'react';\n\nimport Form from './Form';\nimport Loader from './Loader'\n\n\nimport camping from '../icons/012-camp.svg';\nimport bonfire from '../icons/010-bonfire.svg';\nimport viewPoint from '../icons/009-binoculars.svg';\nimport hut from '../icons/032-hut.svg';\n\n\nimport { MyContext } from '../contexts/MyContextProvider';\n\nimport { config } from '../url_config'\n\nimport { fromLonLat, toLonLat } from 'ol/proj';\nimport 'ol/ol.css';\nimport { Map as OlMap, View } from 'ol';\nimport TileLayer from 'ol/layer/Tile';\nimport OSM from 'ol/source/OSM';\nimport XYZ from 'ol/source/XYZ';\nimport { Vector as VectorLayer } from 'ol/layer';\nimport { Vector as VectorSource } from 'ol/source';\nimport Feature from 'ol/Feature';\nimport Point from 'ol/geom/Point';\nimport Geolocation from 'ol/Geolocation';\nimport {Fill, RegularShape, Stroke, Style, Icon} from 'ol/style.js';\n\nconst url = config.url.API_URL\n\nconst iconMapping = {\n  camping,\n  bonfire,\n  view: viewPoint,\n  hut\n};\n\n\nclass Map extends React.Component {\n\n  constructor(props){\n    super(props);\n    this.map = null;\n    this.cyclingLayer = null;\n    this.hikingLayer = null;\n    this.hikebikeLayer = null;\n    \n    this.center = () => {\n      this.map.getView().setCenter(fromLonLat(this.context.getPointIdData().localisation));\n      this.map.getView().setZoom(13);\n    }\n  }\n\n  componentDidMount() {\n    const extraLayer = new VectorLayer({\n      source: new VectorSource({\n        features: []\n      })\n    });\n    const featuresLayer = new VectorLayer({\n      source: new VectorSource({\n        features: []\n      })\n    });\n\n    const geoIcon = new Feature({\n      geometry: new Point([])\n    });\n  \n    const geolocationLayer = new VectorLayer({\n      source: new VectorSource({\n        features: [geoIcon]\n      })\n    });\n\n    this.cyclingLayer = new TileLayer({\n      source: new XYZ({\n        url: 'http://tile.waymarkedtrails.org/cycling/{z}/{x}/{y}.png'\n      })\n    });\n\n    this.hikingLayer = new TileLayer({\n      source: new XYZ({\n        url: 'http://tile.waymarkedtrails.org/hiking/{z}/{x}/{y}.png'\n      })\n    });\n\n    this.hikebikeLayer = new TileLayer({\n      source: new XYZ({\n        url: 'http://tiles.wmflabs.org/hikebike/{z}/{x}/{y}.png'\n      })\n    });\n\n    this.hillshadingLayer = new TileLayer({\n      source: new XYZ({\n        url: 'http://tiles.wmflabs.org/hillshading/{z}/{x}/{y}.png'\n      })\n    });\n\n    this.map = new OlMap({\n      target: this.refs.mapContainer, //change to createRef API!!\n      layers: [\n        new TileLayer({\n          source: new OSM()\n        }),\n        this.hikebikeLayer,\n        this.hikingLayer,\n        this.cyclingLayer,\n        this.hillshadingLayer,\n        extraLayer,\n        featuresLayer,\n        geolocationLayer\n      ], view: new View({\n        center: fromLonLat([this.context.lon, this.context.lat]),\n        zoom: 6,\n      })\n    });\n\n    const geolocation = new Geolocation({\n      tracking: true,\n      projection: this.map.getView().getProjection()\n    });\n    \n    geolocation.on('change', function(evt) {\n      const coord = geolocation.getPosition();\n      geoIcon.getGeometry().setCoordinates(coord);\n    });\n\n    const handleMapClick = (event) => {\n      if (this.context.mode === 'explore') {\n        let pointId = null;\n        this.map.forEachFeatureAtPixel(event.pixel,\n          feature => {\n            pointId = feature.get('id') || null;\n          });\n\n        const newPath = pointId === null ?\n          '/location/' :\n          '/location/' + pointId;\n        this.props.history.push(newPath);\n\n      } else if (this.context.mode === 'edit') {\n        ///////drawing a point/////////\n        const coord = toLonLat(event.coordinate);\n        this.context.setLon(coord[0]);\n        this.context.setLat(coord[1]);\n\n        const star = new Style({\n          image: new RegularShape({\n            fill: new Fill({color: 'blue'}),\n            stroke: new Stroke({color: '#2F4F4F', width: 2}),\n            points: 11,\n            radius: 10,\n            radius2: 3,\n            angle: 0\n          })\n        })\n\n        const features = [];\n\n        const coords = event.coordinate;\n        const newFeature = new Feature({\n          geometry: new Point(coords)\n        })\n\n        newFeature.setStyle(star);\n\n        features.push(newFeature);\n\n        this.state.extraLayer.setSource(\n          new VectorSource({\n            features: features\n          })\n        );\n      }\n    }\n    this.map.on('click', handleMapClick);\n\n    this.setState({\n      extraLayer,\n      featuresLayer,\n      geoIcon\n    });\n  }\n\n  componentDidUpdate() {\n    this.cyclingLayer.setVisible(this.context.cyclingOn);\n    this.hikingLayer.setVisible(this.context.hikingOn);\n    this.hikebikeLayer.setVisible(this.context.hikebikeOn);\n    this.hillshadingLayer.setVisible(this.context.hillshadingOn);\n\n    if (this.context.data === null ||this.state.featuresLayer.values_.source.isEmpty()) {\n      fetch(url + '/api/points')\n        .then(res => res.json())\n        .then(data => {\n          const features = [];\n          data.forEach((e) => {\n            const icon = new Icon({\n              opacity: 1,\n              scale: 0.05,\n              src: iconMapping[e.type]\n            });\n\n            const iconStyle = new Style({\n              image: icon\n            });\n\n            const coords = fromLonLat(e.localisation);\n            const iconFeature = new Feature({\n              id: e._id,\n              geometry: new Point(coords),\n              name: e.name,\n              description: e.description,\n              rating: e.rating\n            });\n            iconFeature.setStyle(iconStyle);\n            features.push(iconFeature);\n          })\n\n          this.state.featuresLayer.setSource(\n            new VectorSource({\n              features: features\n            })\n          );\n          this.context.setData(data);\n        })\n        .catch(error => console.log(error));\n    }\n  }\n\n\n  render() {\n    return (\n      <div>\n        <Loader size={100} loading={!this.context.data}></Loader>\n        <div ref=\"mapContainer\" id=\"mapContainer\"></div>\n        {(!this.context.pointId || this.context.mode === 'edit') ?\n      '' :\n        <button onClick={this.center}>center on location</button>\n        }\n        <Form/>\n      </div>\n    );\n  }\n}\n\nMap.contextType = MyContext;\nexport default Map;","import styled from 'styled-components';\n\nexport const ProfileImage = styled.img`\n  border-radius: 100%;\n  height: 3.5em;\n  margin: 0em 0.5em 0em 3em;\n`;\n\nexport const SmallProfileImage = styled.img`\n  border-radius: 100%;\n  height: 1.5em;\n`;\n","import React, {useContext} from 'react';\nimport { SmallProfileImage } from '../styled-components/ProfileImage';\nimport { AuthContext } from '../contexts/AuthContextProvider';\n\n\nfunction ReviewCard(props) {\n  const authContext = useContext(AuthContext);\n\n  return (\n    <div className=\"ReviewCard flexcontainercolumn\">\n      <br></br>\n      <h5>{props.e.title}</h5>\n      <p> {props.e.description} </p>\n      <h5>rated: {props.e.rating}</h5>\n      {authContext.isAuthenticated ?\n        <SmallProfileImage src={props.e.profilePicture} alt=\"Profile\" /> : ''\n      }\n    </div>\n\n  )\n}\n\nexport default ReviewCard;","import React, { useState, useContext, useEffect } from 'react';\nimport { config } from '../url_config'\nimport { MyContext } from '../contexts/MyContextProvider';\nimport { AuthContext } from '../contexts/AuthContextProvider';\nimport { SmallProfileImage } from '../styled-components/ProfileImage';\nimport  ReviewCard from './ReviewCard';\n\nconst url = config.url.API_URL\n\nfunction Description(props) {\n  const context = useContext(MyContext);\n  const authContext = useContext(AuthContext);\n\n  const [reviews, setReviews] = useState('');\n  const [pointData, setPointData] = useState(null);\n\n  useEffect(() => {\n    setReviews('');\n    if (context.data) {\n      const pointData = context.data.find(e =>\n        e._id === context.pointId);\n      setPointData(pointData);\n    }\n  }, [context.data, context.pointId]);\n\n  const fetchReviews = () => {\n    fetch(url + \"/api/points/\" + context.pointId)\n      .then(res => res.json())\n      .then(res => {\n        const rev = res.map((e, index) => {\n          return (\n           <ReviewCard e={e} key={index}/>\n          )\n        })\n        setReviews(rev);\n      });\n  }\n\n  const submitReview = (e) => {\n    e.preventDefault();\n    const dataForm = new URLSearchParams();\n    for (const pair of new FormData(e.target)) {\n      dataForm.append(pair[0], pair[1]);\n    }\n\n    fetch(url + \"/api/points/\" + context.pointId, {\n      method: 'POST',\n      headers: {\n        'Authorization': 'Bearer ' + authContext.jwToken,\n        'Content-Type': 'application/x-www-form-urlencoded'\n      },\n      body: dataForm,\n      withCredentials: true,\n      credentials: 'include'\n    })\n      .then(res => res.json())\n      .then((res) => {\n        setPointData({ ...pointData, rating: res.newRating });\n        fetchReviews();\n      });\n  }\n\n  return (\n    (!pointData || context.mode === 'edit') ?\n      '' :\n      <div className=\"flexcontainercolumn\">\n        <h1>\n          {pointData.name}\n        </h1>\n        <p>\n          {pointData.description}\n        </p>\n        <h5>\n          rating: {pointData.rating}\n        </h5>\n        {authContext.isAuthenticated ?\n          <p>\n            created by: <SmallProfileImage src={pointData.profilePicture} alt=\"Profile\" />\n          </p> : ''\n        }\n\n        <button type=\"click\" onClick={fetchReviews} className=\"btn btn-dark btn-sm\">Show reviews</button>\n\n        {reviews}\n\n        {authContext.isAuthenticated ?\n          <form className=\"container\" onSubmit={submitReview}>\n            <div className=\"row\">\n              <div className=\"col-sm\">\n                <label htmlFor=\"title\">Title:</label>\n                <input className=\"form-control input-sm\" placeholder=\"title\" required name=\"title\" id=\"title\"></input>\n              </div>\n              <div className=\"col-sm\">\n                <label htmlFor=\"description\">Description:</label>\n                <input className=\"form-control input-sm\" placeholder=\"description\" name=\"description\" id=\"description\"></input>\n              </div>\n              <div className=\"col-sm\">\n                <label htmlFor=\"rating\">Rating:</label>\n                <input className=\"form-control input-sm\" placeholder=\"1-10\" required min=\"1\" max=\"10\" name=\"rating\" id=\"rating\" type=\"number\"></input>\n              </div>\n            </div>\n            <div className=\"flexcontainer\">\n              <button type=\"submit\" className=\" btn btn-dark btn-bg\">Review</button>\n            </div>\n          </form> : ''\n        }\n      </div>\n\n  )\n}\n\nexport default Description;","import React, { useContext, useEffect } from 'react';\nimport Map from '../components/Map';\nimport Description from '../components/Description';\nimport { MyContext } from '../contexts/MyContextProvider';\nimport { AuthContext } from '../contexts/AuthContextProvider';\n\nimport { config } from '../url_config'\n\n\nfunction Location(props) {\n  const context = useContext(MyContext);\n  const authContext = useContext(AuthContext);\n\n  \n  useEffect(() => {\n    const pathPointId = props.location.pathname.match(/[^/]+$/) ?\n      props.location.pathname.match(/[^/]+$/)[0] : null;\n    if (context.pointId !== pathPointId && pathPointId !== 'location') {\n      context.setPointId(pathPointId);\n    }\n  }, [props.location.pathname])\n\n  const addToFavourites = () => {\n    const data = new URLSearchParams();\n    data.append('locationId', context.pointId);\n    fetch(config.url.API_URL + '/api/profiles/favourites', {\n        method: 'POST',\n        headers: {\n          'Authorization': 'Bearer ' + authContext.jwToken,\n          'Content-Type': 'application/x-www-form-urlencoded'\n        },\n        body: data\n      })\n        .then((res) => {\n          console.log(res);\n        })\n  }\n\n  return (\n    <div>\n      <Map history={props.history}></Map>\n      { !authContext.isAuthenticated || !context.pointId || context.mode === 'edit' ?\n      '' :\n      <button onClick={addToFavourites}>add to favourites</button>\n        }\n      \n      <Description></Description>\n    </div>\n  );\n}\n\nexport default Location;","import React, { useContext } from \"react\";\n\nimport Location from \"./Location\";\nimport { Route } from \"react-router-dom\";\nimport { MyContext } from \"../contexts/MyContextProvider\";\nimport { AuthContext } from \"../contexts/AuthContextProvider\";\n\nfunction App() {\n  const context = useContext(MyContext);\n  const authContext = useContext(AuthContext);\n\n  const switchText = context.mode === \"explore\" ? \"Edit map\" : \"Explore\";\n\n  const handleInputChange = event => {\n    const target = event.target;\n    const value = target.checked;\n    const name = target.name;\n\n    switch (name) {\n      case \"cyclingOn\":\n        return context.setCyclingOn(value);\n      case \"hikingOn\":\n        return context.setHikingOn(value);\n      case \"hikebikeOn\":\n        return context.setHikebikeOn(value);\n      case \"hillshadingOn\":\n        return context.setHillshadingOn(value);\n      default:\n        return;\n    }\n  };\n\n  return (\n    <div className=\"App\">\n      {authContext.isAuthenticated ? (\n        <button id=\"switch modes\" onClick={context.switchMode}>\n          {switchText}\n        </button>\n      ) : null}\n\n      <form id=\"layers\">\n        <label>\n          <a href=\"https://cycling.waymarkedtrails.org/\">\n            waymarkedtrails cycling{\" \"}\n          </a>\n          <input\n            name=\"cyclingOn\"\n            type=\"checkbox\"\n            checked={context.cyclingOn}\n            onChange={handleInputChange}\n          />\n        </label>\n        <label>\n          <a href=\"https://hiking.waymarkedtrails.org/\">\n            waymarkedtrails hiking{\" \"}\n          </a>\n          <input\n            name=\"hikingOn\"\n            type=\"checkbox\"\n            value={context.hikingOn}\n            onChange={handleInputChange}\n          />\n        </label>\n        <label>\n          <a href=\"http://hikebikemap.org\">wmflabs Hike Bike </a>\n          <input\n            name=\"hikebikeOn\"\n            type=\"checkbox\"\n            value={context.hikebikeOn}\n            onChange={handleInputChange}\n          />\n        </label>\n        <label>\n          <a href=\"http://hikebikemap.org\">wmflabs Hillshading </a>\n          <input\n            name=\"hillshadingOn\"\n            type=\"checkbox\"\n            value={context.hillshadingOn}\n            onChange={handleInputChange}\n          />\n        </label>\n      </form>\n      {context.redirect}\n      <Route path=\"/\" component={Location} />\n    </div>\n  );\n}\n\nexport default App;\n","import React, { useContext, useEffect, useState } from 'react';\nimport { AuthContext } from '../contexts/AuthContextProvider';\nimport { MyContext } from '../contexts/MyContextProvider';\nimport { Link } from 'react-router-dom';\nimport { config } from '../url_config'\nimport Loader from '../components/Loader'\n\nconst url = config.url.API_URL\n\n\nfunction Profile(props) {\n  const authContext = useContext(AuthContext);\n  const context = useContext(MyContext);\n\n  const [profileData, setProfileData] = useState(null);\n\n  if (!authContext.isAuthenticated) {\n    props.history.push('/')\n  };\n\n  useEffect(() => {\n    fetch(url + '/api/profiles', { \n      method: 'GET',\n      credentials: 'include',\n      headers: {\n        'Authorization': 'Bearer ' + authContext.jwToken\n      } \n    })\n      .then(res => res.json())\n      .then(data => {\n        setProfileData(data)\n      }\n      );\n  }, [])\n\n  return (\n\n    <div className=\"Profile\">\n      {profileData ?\n      <div className=\"flexcontainercolumn\">\n        <h2>{profileData.user.name}</h2>\n        <h4>Your locations:\n        </h4>\n        {profileData.locations.map(location => {\n          return   <Link to={\"/location/\"+location._id} key={location.name}>{location.name}</Link>\n        })}\n          <h4>Your favourites:\n        </h4>\n        {profileData.user.favourites.map(location => {\n          return   <Link to={\"/location/\"+location} key={location.name}>{context.getPointIdData(location).name}</Link>\n        })}\n         </div>\n        :\n        <Loader size={80} loading={true}/>}\n\n\n    </div>\n  );\n}\n\nexport default Profile;\n","import React, { useContext } from 'react';\nimport App from './views/App';\nimport Profile from './views/Profile';\n\nimport { Route, BrowserRouter as Router, Link, Redirect, Switch } from 'react-router-dom';\nimport FacebookLogin from 'react-facebook-login';\nimport { AuthContext } from './contexts/AuthContextProvider';\nimport { MyContext } from './contexts/MyContextProvider';\nimport { ProfileImage } from './styled-components/ProfileImage';\nimport { config } from './url_config'\nconst url = config.url.API_URL\n\n\nfunction Main() {\n  const authContext = useContext(AuthContext);\n  const context = useContext(MyContext);\n\n  const logout = () => {\n    authContext.setIsAuthenticated(false);\n    authContext.setUser(null);\n    authContext.setJwToken(null);\n    context.setMode('explore');\n  };\n\n  const facebookResponse = (response) => {\n    // store data in local storage\n\n    const options = {\n      method: 'POST',\n      body: `access_token=${response.accessToken}`,\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded'\n      },\n      mode: 'cors',\n      cache: 'default'\n    };\n\n    fetch(url + '/api/auth/facebook', options) \n      .then(r => {\n        const token = r.headers.get('x-auth-token');\n        r.json().then(user => {\n          if (token) {\n            authContext.setIsAuthenticated(true);\n            authContext.setUser(user._id);\n            authContext.setJwToken(token);\n            authContext.setPicture(user.photoUrl);\n          }\n        });\n      })\n      \n  }\n  const profileLink = authContext.picture ?\n  <ProfileImage src={authContext.picture} alt=\"Profile\" /> : 'Profile';\n\n  return (\n    \n      <Router basename={process.env.PUBLIC_URL}>\n        <nav className=\"navbar navbar-dark bg-dark\">\n          \n           <Link to='/location'><h1 className=\"text-light title\">\n             Tently\n           </h1></Link> \n            \n          \n          {authContext.isAuthenticated ?\n          <div>\n            <button onClick={logout} className=\"button\">\n              Log out\n            </button>\n             <Link to='/profile'>{profileLink}</Link>\n          </div>\n            :\n            <FacebookLogin\n              appId={config.app_id.FACEBOOK_APPID}\n              autoLoad={true}\n              fields=\"name,email,picture\"\n              callback={facebookResponse} />\n          }\n       \n        </nav>\n        {/* <Geo></Geo> */}\n\n        <Switch>\n          <Route path=\"/location\" component={App} />\n          <Route exact path=\"/\">\n            <Redirect to=\"/location\"></Redirect>\n          </Route>\n          <Route path=\"/profile\" component={Profile} />\n        </Switch>\n      </Router>\n  );\n}\n\nexport default Main;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport Main from './Main';\nimport './index.css';\nimport 'bootstrap/dist/css/bootstrap.css';\nimport AuthContextProvider from './contexts/AuthContextProvider';\nimport MyContextProvider from './contexts/MyContextProvider';\n\n\nReactDOM.render(\n  <MyContextProvider>\n    <AuthContextProvider>\n      <Main />\n    </AuthContextProvider>\n  </MyContextProvider>\n  , document.getElementById('root'));\n\n\n","module.exports = __webpack_public_path__ + \"static/media/012-camp.8f0eb9f0.svg\";","module.exports = __webpack_public_path__ + \"static/media/010-bonfire.21b76057.svg\";","module.exports = __webpack_public_path__ + \"static/media/009-binoculars.6b6a714c.svg\";","module.exports = __webpack_public_path__ + \"static/media/032-hut.f466d3ec.svg\";"],"sourceRoot":""}