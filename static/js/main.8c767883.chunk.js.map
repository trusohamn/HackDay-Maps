{"version":3,"sources":["contexts/MyContextProvider.js","url_config.js","components/Form.js","components/Map.js","components/Description.js","components/Location.js","components/App.js","Main.js","index.js","icons/039-tent.svg","icons/010-bonfire.svg","icons/009-binoculars.svg"],"names":["MyContext","React","createContext","MyContextProvider","props","_useState","useState","_useState2","Object","slicedToArray","pointId","setPointId","_useState3","_useState4","redirect","setRedirect","_useState5","_useState6","saveInHistory","setSaveInHistory","_useState7","_useState8","mode","setMode","_useState9","_useState10","data","setData","state","switchMode","react_default","a","createElement","Provider","value","children","config","url","API_URL","Form","context","useContext","className","onSubmit","e","preventDefault","URLSearchParams","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","FormData","target","Symbol","iterator","next","done","pair","append","err","return","fetch","method","headers","Content-Type","body","then","res","console","log","action","readOnly","type","step","name","id","lon","lat","htmlFor","required","placeholder","iconMapping","camping","bonfire","view","viewPoint","Map","_this","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","_this2","extraLayer","VectorLayer","source","VectorSource","features","featuresLayer","map","OlMap","refs","mapContainer","layers","TileLayer","OSM","View","center","fromLonLat","zoom","on","event","forEachFeatureAtPixel","pixel","feature","get","location","match","newPath","react_router","to","coord","toLonLat","coordinate","setState","coords","newFeature","Feature","geometry","Point","push","setSource","prevProps","prevState","prevContext","_this3","json","points","forEach","icon","Icon","opacity","scale","src","iconStyle","Style","image","localisation","iconFeature","description","rating","setStyle","catch","error","ref","components_Form","Component","contextType","Description","reviews","setReviews","pointData","setPointData","useEffect","find","onClick","rev","title","dataForm","min","max","Location","pathPointId","pathname","history","components_Map","components_Description","App","switchText","path","component","Main","contexts_MyContextProvider","react_router_dom","ReactDOM","render","src_Main","document","getElementById","module","exports","__webpack_require__","p"],"mappings":"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","file":"static/js/main.8c767883.chunk.js","sourcesContent":["import React, { useState } from 'react'\nexport const MyContext = React.createContext({})\n\nfunction MyContextProvider(props) {\n    const [pointId, setPointId] = useState(null);\n    const [redirect, setRedirect] = useState(null);\n    const [saveInHistory, setSaveInHistory] = useState(false);\n    const [mode, setMode] = useState('explore');\n    const [data, setData] = useState(null);\n\n    const switchMode = () => {\n        const newMode = (mode === 'explore') ? 'edit' : 'explore';\n        setMode(newMode);\n    };\n\n    const state = {\n        pointId,\n        setPointId,\n        redirect,\n        setRedirect,\n        mode,\n        switchMode,\n        data,\n        setData,\n        saveInHistory,\n        setSaveInHistory\n    }\n    return (\n        <MyContext.Provider value={state}>\n            {props.children}\n        </MyContext.Provider>\n    )\n\n}\nexport default MyContextProvider\n","\nconst prod = {\n    url: {\n        API_URL: 'https://db-truso-map-space.herokuapp.com'\n    }\n};\nconst dev = {\n    url: {\n        API_URL: 'http://localhost:8000'\n    }\n};\nexport const config = process.env.NODE_ENV === 'development' ? dev: prod;","import React, { useContext } from 'react';\nimport { config } from '../url_config'\nimport { MyContext } from '../contexts/MyContextProvider';\nconst url = config.url.API_URL\n\n\nfunction Form(props) {\n\n    const context = useContext(MyContext);\n    const postPoint = (e) => {\n        e.preventDefault();\n\n        const data = new URLSearchParams();\n        for (const pair of new FormData(e.target)) {\n            data.append(pair[0], pair[1]);\n        }\n\n        fetch(url + \"/api/points\", {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/x-www-form-urlencoded'\n            },\n            body: data\n        })\n            .then((res) => {\n                console.log('new point posted');\n                context.setData(null);\n            })\n    }\n\n    return (\n        context.mode === 'explore' ? '' :\n            <div>\n                <form className=\"container\" onSubmit={postPoint} action=\"http://localhost:8000/api/points\" method=\"post\" >\n\n                    <div className=\"flexcontainer\">\n                        <h3>Add new location  </h3>\n                        <input className=\"d-none\" readOnly type=\"number\" step=\"any\" name=\"lon\" id=\"lon\" value={props.lon}></input>\n                        <input className=\"d-none\" readOnly type=\"number\" step=\"any\" name=\"lat\" id=\"lat\" value={props.lat}></input>\n                    </div>\n                    <div className=\"row\">\n                        <div className=\"col-sm\">\n                            <label htmlFor=\"name\">Name:</label>\n                            <input required className=\"form-control input-sm\" placeholder=\"place name\" type=\"text\" name=\"name\" id=\"name\"></input>\n                        </div>\n                        <div className=\"col-sm\">\n                            <label htmlFor=\"description\">Description:</label>\n                            <input className=\"form-control input-sm\" placeholder=\"place decription\" type=\"text\" name=\"description\" id=\"description\"></input>\n                        </div>\n                        <div className=\"col-sm\">\n                            <label htmlFor=\"type\">Select type:</label>\n                            <select className=\"form-control input-sm\" id=\"type\" name=\"type\">\n                                <option>camping</option>\n                                <option>bonfire</option>\n                                <option>view</option>\n                            </select>\n                        </div>\n                    </div>\n                    <div className=\"flexcontainer\">\n                        <button type=\"submit\" className=\"btn btn-dark btn-bg\">Add to the map</button>\n                    </div>\n                </form>\n            </div >\n\n\n    )\n}\n// className=\"d-none\"\n// action=\"http://localhost:8000/api/points\" method=\"post\"\nexport default Form;","import React from 'react';\n\nimport Form from './Form';\n\nimport camping from '../icons/039-tent.svg';\nimport bonfire from '../icons/010-bonfire.svg';\nimport viewPoint from '../icons/009-binoculars.svg';\n\nimport { Redirect } from 'react-router-dom';\n\n\nimport { MyContext } from '../contexts/MyContextProvider';\n\nimport { config } from '../url_config'\n\nimport { fromLonLat, toLonLat } from 'ol/proj';\nimport 'ol/ol.css';\nimport { Map as OlMap, View } from 'ol';\nimport TileLayer from 'ol/layer/Tile';\nimport OSM from 'ol/source/OSM';\nimport { Vector as VectorLayer } from 'ol/layer';\nimport { Vector as VectorSource } from 'ol/source';\nimport Feature from 'ol/Feature';\nimport Point from 'ol/geom/Point';\nimport { Icon, Style } from 'ol/style.js';\n\nconst url = config.url.API_URL\n\n\n\nconst iconMapping = {\n    camping: camping,\n    bonfire: bonfire,\n    view: viewPoint\n};\n\nclass Map extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = ({\n            lon: 17.862083241832443,\n            lat: 59.30184823106963\n        });\n        // console.log('map constructor');\n    }\n    componentWillUnmount() {\n        // console.log('map is going to unmount!');\n    }\n\n    componentDidMount() {\n        // console.log('map did mount');\n        const extraLayer = new VectorLayer({\n            source: new VectorSource({\n                features: []\n            })\n        });\n        const featuresLayer = new VectorLayer({\n            source: new VectorSource({\n                features: []\n            })\n        });\n\n        const map = new OlMap({\n            target: this.refs.mapContainer, //change to createRef API!!\n            layers: [\n                new TileLayer({\n                    source: new OSM()\n                }),\n                extraLayer,\n                featuresLayer\n            ], view: new View({\n                //later check for route and get the id from the localisation\n                center: fromLonLat([this.state.lon, this.state.lat]),\n                zoom: 11,\n            })\n        });\n        const handleMapClick = (event) => {\n            ///getting pointid of the clicked feature ///\n            if (this.context.mode === 'explore') {\n                // console.log('click!');\n                let pointId = null;\n                this.state.map.forEachFeatureAtPixel(event.pixel,\n                    feature => {\n                        console.log(feature.get('id'));\n                        pointId = feature.get('id') || null;\n                    });\n\n                    console.log(this.props.location);\n                    console.log(this.props.match);\n                const newPath = pointId === null ? \n                '/location/' : \n                '/location/' + pointId;\n                // console.log('Map handleMapClick setNewPath', newPath)\n                this.context.setSaveInHistory(true);\n                this.context.setRedirect(<Redirect to={newPath}></Redirect>)\n            } else if (this.context.mode === 'edit') {\n                ///////drawing a point/////////\n                const coord = toLonLat(event.coordinate);\n                console.log(coord);\n                this.setState({\n                    lon: coord[0],\n                    lat: coord[1]\n                });\n\n                const features = [];\n\n                const coords = event.coordinate;\n                const newFeature = new Feature({\n                    geometry: new Point(coords)\n                })\n\n                features.push(newFeature);\n\n                this.state.extraLayer.setSource(\n                    new VectorSource({\n                        features: features\n                    })\n                );\n            }\n        }\n        map.on('click', handleMapClick);\n\n        this.setState({\n            map: map,\n            extraLayer: extraLayer,\n            featuresLayer: featuresLayer\n        });\n    }\n\n    componentDidUpdate(prevProps, prevState, prevContext) {\n        // console.log('map componentdidupdate');\n        // console.log(prevState);\n        // console.log(this.context);\n\n        if (this.context.data === null) {\n            // console.log('updating data');\n            fetch(url + '/api/points')\n                .then(res => res.json())\n                .then(data => {\n                    const features = [];\n                    data.points.forEach((e) => {\n                        const icon = new Icon({\n                            opacity: 1,\n                            scale: 0.05,\n                            src: iconMapping[e.type]\n                        });\n\n                        const iconStyle = new Style({\n                            image: icon\n                        });\n\n                        const coords = fromLonLat(e.localisation);\n                        const iconFeature = new Feature({\n                            id: e.id,\n                            geometry: new Point(coords),\n                            name: e.name,\n                            description: e.description,\n                            rating: e.rating\n                        });\n                        iconFeature.setStyle(iconStyle);\n                        features.push(iconFeature);\n                    })\n\n                    this.state.featuresLayer.setSource(\n                        new VectorSource({\n                            features: features\n                        })\n                    );\n                    this.context.setData(data);\n                })\n                .catch(error => console.log(error));\n        }\n    }\n\n    render() {\n        return (\n            <div>\n                <div ref=\"mapContainer\" id=\"mapContainer\"></div>\n                <Form lon={this.state.lon} lat={this.state.lat}></Form>\n            </div>\n        );\n    }\n}\n\nMap.contextType = MyContext;\nexport default Map;","import React, { useState, useContext, useEffect } from 'react';\nimport { config } from '../url_config'\nimport { MyContext } from '../contexts/MyContextProvider';\nconst url = config.url.API_URL\n\nfunction Description(props) {\n    const context = useContext(MyContext);\n\n    const [reviews, setReviews] = useState('');\n    const [pointData, setPointData] = useState(null);\n\n    useEffect(() => {\n        setReviews('');\n        if (context.data) {\n            // console.log('Description use effetct, generating pointData, pointId', context.pointId);\n            // console.log('pathname', window.location.pathname);\n            const pointData = context.data.points.find(e =>\n                e.id === context.pointId);\n            setPointData(pointData);\n        }\n    }, [context.data, context.pointId]);\n\n    const fetchReviews = () => {\n        console.log('Description fetch reviews');\n        //get request to api/points/:id\n        fetch(url + \"/api/points/\" + context.pointId)\n            .then(res => res.json())\n            .then(res => {\n                console.log(res.rev)\n                const rev = res.rev.map(e => {\n                    return (\n                        <div className=\"flexcontainercolumn\">\n                            <br></br>\n                            <h5>{e.title}</h5>\n                            <p> {e.description} </p>\n                            <h5>rated: {e.rating}</h5>\n                        </div>\n                    )\n                })\n                setReviews(rev);\n            });\n    }\n\n    const submitReview = (e) => {\n        e.preventDefault();\n        const dataForm = new URLSearchParams();\n        for (const pair of new FormData(e.target)) {\n            dataForm.append(pair[0], pair[1]);\n        }\n\n        fetch(url + \"/api/points/\" + context.pointId, {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/x-www-form-urlencoded'\n            },\n            body: dataForm\n        })\n            .then(() => {\n                context.setData(null);\n            });\n    }\n\n    return (\n        (!pointData || context.mode === 'edit') ?\n            '' :\n            <div className=\"flexcontainercolumn\">\n                <h1>\n                    {pointData.name}\n                </h1>\n                <p>\n                    {pointData.description}\n                    <br />\n                    rating: {pointData.rating}\n                </p>\n                <button type=\"click\" onClick={fetchReviews} className=\"btn btn-dark btn-sm\">Show reviews</button>\n\n                {reviews}\n\n                <form className=\"container\" onSubmit={submitReview}>\n                    <div className=\"row\">\n                        <div className=\"col-sm\">\n                            <label htmlFor=\"title\">Title:</label>\n                            <input className=\"form-control input-sm\" placeholder=\"title\" required name=\"title\" id=\"title\"></input>\n                        </div>\n                        <div className=\"col-sm\">\n                            <label htmlFor=\"description\">Description:</label>\n                            <input className=\"form-control input-sm\" placeholder=\"description\" name=\"description\" id=\"description\"></input>\n                        </div>\n                        <div className=\"col-sm\">\n                            <label htmlFor=\"rating\">Rating:</label>\n                            <input className=\"form-control input-sm\" placeholder=\"1-10\" required min=\"1\" max=\"10\" name=\"rating\" id=\"rating\" type=\"number\"></input>\n                        </div>\n                    </div>\n                    <div className=\"flexcontainer\">\n                        <button type=\"submit\" className=\" btn btn-dark btn-bg\">Review</button>\n                    </div>\n                </form>\n\n            </div>\n\n    )\n}\n\nexport default Description;","import React, { useContext, useEffect } from 'react';\nimport Map from './Map';\nimport Description from './Description';\nimport { MyContext } from '../contexts/MyContextProvider';\n\nfunction Location(props) {\n    const context = useContext(MyContext);\n\n    useEffect(() => {\n        // console.log('Location useEffect pathname was changed to', props.location.pathname);\n        const pathPointId = props.location.pathname.match(/[^/]+$/) ? \n        props.location.pathname.match(/[^/]+$/)[0] : null; \n        console.log('pathpointid', pathPointId);\n        if(context.saveInHistory){\n            console.log('saving in the history');\n            props.history.push(props.location.pathname);\n            context.setSaveInHistory(false);\n        };\n        if (context.pointId !== pathPointId) {\n            // console.log('Location, set Point Id', pathPointId);\n            context.setPointId(pathPointId);\n        }\n    }, [props.location.pathname])\n    \n\n    return (\n        <div>\n            <Map location={props.location} match={props.match}></Map>\n            <Description></Description>\n        </div>\n    );\n}\n\nexport default Location;","import React, { useContext } from 'react';\n\nimport Location from './Location';\nimport { Route, BrowserRouter as Router } from 'react-router-dom';\nimport { MyContext } from '../contexts/MyContextProvider';\n\n\nfunction App() {\n  const context = useContext(MyContext);\n\n  const switchText = (context.mode === 'explore') ? 'Edit map' : 'Explore';\n\n  return (\n    \n      <div className=\"App\">\n        <nav className=\"navbar navbar-dark bg-dark\">\n          <h1 className=\"text-light\">\n            Your Map Space\n          </h1>\n          <button id=\"switch modes\" onClick={context.switchMode}>{switchText}</button>\n        </nav>\n        {context.redirect}\n        <Route path=\"/\" component={Location} />\n      </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport MyContextProvider from './contexts/MyContextProvider';\nimport App from './components/App';\nimport { Route, BrowserRouter as Router, Redirect } from 'react-router-dom';\n\n\nfunction Main() {\n\n    return (\n        <MyContextProvider>\n            <Router>\n                <Route path=\"/\">\n                    <Redirect to=\"/location\"></Redirect>\n                </Route>\n            <Route path=\"/location\" component={App} />\n            </Router>\n        </MyContextProvider>\n\n    );\n}\n\nexport default Main;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport Main from './Main';\nimport './index.css';\nimport 'bootstrap/dist/css/bootstrap.css';\n\nReactDOM.render(<Main />, document.getElementById('root'));\n\n\n","module.exports = __webpack_public_path__ + \"static/media/039-tent.ebd03a54.svg\";","module.exports = __webpack_public_path__ + \"static/media/010-bonfire.21b76057.svg\";","module.exports = __webpack_public_path__ + \"static/media/009-binoculars.6b6a714c.svg\";"],"sourceRoot":""}