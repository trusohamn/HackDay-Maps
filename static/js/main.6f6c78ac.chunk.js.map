{"version":3,"sources":["contexts/MyContextProvider.js","mocked_login.js","contexts/AuthContextProvider.js","url_config.js","components/PostForm.js","components/Form.js","components/Loader.js","components/Map.js","styled-components/ProfileImage.js","components/ReviewCard.js","components/Description.js","views/Location.js","views/App.js","views/Profile.js","Main.js","index.js","icons/039-tent.svg","icons/010-bonfire.svg","icons/009-binoculars.svg"],"names":["MyContext","React","createContext","MyContextProvider","props","_useState","useState","_useState2","Object","slicedToArray","pointId","setPointId","_useState3","_useState4","mode","setMode","_useState5","_useState6","data","setData","_useState7","_useState8","lon","setLon","_useState9","_useState10","lat","setLat","state","getPointIdData","id","arguments","length","undefined","find","d","_id","switchMode","react_default","a","createElement","Provider","value","children","mocked_login","isAuthenticated","user","picture","jwToken","AuthContext","AuthContextProvider","process","REACT_APP_LOGEDIN","setIsAuthenticated","mockedLogin","setUser","setPicture","setJwToken","config","url","API_URL","app_id","FACEBOOK_APPID","PostForm","useContext","stateObj","inputs","reduce","acc","input","name","default","setState","handleChange","e","objectSpread","defineProperty","target","className","onSubmit","preventDefault","URLSearchParams","key","append","additionalInputs","formTitle","map","htmlFor","label","selectType","onChange","options","option","required","placeholder","type","buttonTitle","Form","context","components_PostForm","onSucessPost","apiPath","Loader","lib","size","color","loading","iconMapping","camping","bonfire","view","viewPoint","Map","_this","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","center","getView","setCenter","fromLonLat","localisation","setZoom","_this2","extraLayer","VectorLayer","source","VectorSource","features","featuresLayer","OlMap","refs","mapContainer","layers","TileLayer","OSM","View","zoom","on","event","forEachFeatureAtPixel","pixel","feature","get","newPath","history","push","coord","toLonLat","coordinate","coords","newFeature","Feature","geometry","Point","setSource","_this3","values_","isEmpty","fetch","then","res","json","forEach","icon","Icon","opacity","scale","src","iconStyle","Style","image","iconFeature","description","rating","setStyle","catch","error","console","log","components_Loader","ref","onClick","components_Form","Component","contextType","ProfileImage","styled","img","_templateObject","SmallProfileImage","_templateObject2","ReviewCard","authContext","title","profilePicture","alt","Description","reviews","setReviews","pointData","setPointData","useEffect","rev","index","components_ReviewCard","dataForm","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","FormData","Symbol","iterator","next","done","pair","err","return","method","headers","Authorization","Content-Type","body","withCredentials","credentials","newRating","min","max","Location","pathPointId","location","pathname","match","components_Map","components_Description","App","switchText","redirect","react_router","path","component","Profile","profileData","setProfileData","locations","react_router_dom","to","favourites","Main","profileLink","basename","facebook_login_with_button_default","appId","autoLoad","fields","callback","response","concat","accessToken","cache","r","token","photoUrl","exact","ReactDOM","render","contexts_MyContextProvider","contexts_AuthContextProvider","src_Main","document","getElementById","module","exports","__webpack_require__","p"],"mappings":"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","file":"static/js/main.6f6c78ac.chunk.js","sourcesContent":["import React, { useState } from 'react'\nexport const MyContext = React.createContext({})\n\nfunction MyContextProvider(props) {\n    const [pointId, setPointId] = useState(null);\n    const [mode, setMode] = useState('explore');\n    const [data, setData] = useState(null);\n    const [lon, setLon] = useState(17.86208324183244);\n    const [lat, setLat] = useState(59.30184823106963);\n\n    const switchMode = () => {\n        const newMode = (mode === 'explore') ? 'edit' : 'explore';\n        setMode(newMode);\n    };\n    \n    const getPointIdData = (id=pointId) => {\n        const pointData =  data.find( d => d._id == id);\n        return pointData;\n    }\n\n\n    const state = {\n        pointId,\n        setPointId,\n        getPointIdData,\n        mode,\n        setMode,\n        switchMode,\n        data,\n        setData,\n        lon, setLon,\n        lat, setLat,\n    }\n    return (\n        <MyContext.Provider value={state}>\n            {props.children}\n        </MyContext.Provider>\n    )\n\n}\nexport default MyContextProvider\n","export default {\n    isAuthenticated : true,\n    user: \"5d2cd2dd1a88bd3129ed41cd\",\n    picture: \"https://graph.facebook.com/10219128370309728/picture?type=large\",\n    jwToken: \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVkMmNkMmRkMWE4OGJkMzEyOWVkNDFjZCIsImlhdCI6MTU2MzY1NjM5MiwiZXhwIjoxNTYzNjYzNTkyfQ.oS_qwR9qmT183NoKemPAuWRCSiK1tIgapdwdKkFupv4\"\n    }\n    ","import React, { useState } from 'react'\nimport mockedLogin from '../mocked_login';\nexport const AuthContext = React.createContext({})\n\nfunction AuthContextProvider(props) {\n  const [isAuthenticated, setIsAuthenticated] = useState(process.env.REACT_APP_LOGEDIN ? \n    true: false);\n  const [user, setUser] = useState(process.env.REACT_APP_LOGEDIN ? \n    mockedLogin.user :\n    null);\n  const [picture, setPicture] = useState(process.env.REACT_APP_LOGEDIN ? \n    mockedLogin.picture :\n    null);\n  const [jwToken, setJwToken] = useState(process.env.REACT_APP_LOGEDIN ? \n    mockedLogin.jwToken :\n    null);\n\n    const state = {\n      isAuthenticated,\n      setIsAuthenticated,\n      user,\n      setUser,\n      jwToken,\n      setJwToken,\n      picture,\n      setPicture\n    }\n    return (\n        <AuthContext.Provider value={state}>\n            {props.children}\n        </AuthContext.Provider>\n    )\n\n}\nexport default AuthContextProvider\n","\nconst prod = {\n    url: {\n        API_URL: 'https://db-truso-map-space.herokuapp.com'\n    },\n    app_id: {\n      FACEBOOK_APPID: '383464965621720'\n    }\n};\nconst dev = {\n    url: {\n        API_URL: 'http://localhost:8000'\n    },\n    app_id: {\n      FACEBOOK_APPID: '878158445910684'\n    }\n};\nexport const config = process.env.NODE_ENV === 'development' ? dev: prod;","import React, { useContext, useState, useEffect } from 'react';\nimport { config } from '../url_config'\nimport { MyContext } from '../contexts/MyContextProvider';\nimport { AuthContext } from '../contexts/AuthContextProvider';\n\nfunction PostForm(props) {\n  const context = useContext(MyContext);\n  const authContext = useContext(AuthContext);\n\n  const stateObj = props.inputs.reduce((acc, input) => {\n    acc[input.name] = input.default ||  '' ;\n    return acc;\n  }, {});\n\n  const [state, setState] = useState(stateObj);\n\n  const handleChange = (e) => {\n    setState({ ...state, [e.target.id]: e.target.value });\n  }\n\n  const SubmitHandler = (e) => {\n    e.preventDefault();\n\n    const data = new URLSearchParams();\n    for (const key in state) {\n      data.append(key, state[key]);\n    }\n    for (const key in props.additionalInputs) {\n      data.append(key, props.additionalInputs[key]);\n    }\n\n    \n    // add additional inputs\n\n    // fetch(config.url.API_URL + props.apiPath, {\n    //   method: 'POST',\n    //   headers: {\n    //     'Authorization': 'Bearer ' + authContext.jwToken,\n    //     'Content-Type': 'application/x-www-form-urlencoded'\n    //   },\n    //   body: data\n    // })\n    //   .then((res) => {\n    //     props.onSucessPost(res);\n    //   })\n  }\n\n\n  return (\n    <div>\n      <form className=\"container\" onSubmit={SubmitHandler} >\n\n        <div className=\"flexcontainer\">\n          <h3>{props.formTitle}</h3>\n        </div>\n        <div className=\"row\">\n          {props.inputs.map(input => {\n            return (\n              <div className=\"col-sm\" key={input.name}>\n                <label htmlFor={input.name}>{input.label}</label>\n                {input.selectType ?\n                  <select className=\"form-control input-sm\" id={input.name} name={input.name} value={state[input.name]} onChange={handleChange}>\n                    {input.options.map(option => <option key={option}>{option}</option>)}\n                  </select>\n                  :\n                  <input required={input.required} className=\"form-control input-sm\" placeholder={input.placeholder} type={input.type} name={input.name} id={input.name} value={state[input.name]} onChange={handleChange}></input>\n                }\n              </div>\n            )\n          })}\n        </div>\n        <div className=\"flexcontainer\">\n          <button type=\"submit\" className=\"btn btn-dark btn-bg\">{props.buttonTitle}</button>\n        </div>\n      </form>\n    </div >\n  )\n}\n\nexport default PostForm;","import React, { useContext } from 'react';\nimport { MyContext } from '../contexts/MyContextProvider';\nimport { AuthContext } from '../contexts/AuthContextProvider';\nimport PostForm from './PostForm';\n\nfunction Form(props) {\n\n  const context = useContext(MyContext);\n  const authContext = useContext(AuthContext);\n\n  const onSucessPost = () => context.setData(null);\n  const apiPath = '/api/points'\n  const formTitle = 'Add new location'\n  \n  const additionalInputs = {\n    lon: context.lon,\n    lat: context.lat\n  }\n  \n  const inputs = [\n    {\n      name: 'name',\n      label: 'Name:',\n      required: true,\n      placeholder: 'place name',\n      type: 'text',\n    },\n    {\n      name: 'description',\n      label: 'Description:',\n      required: false,\n      placeholder: 'place decription',\n      type: 'text',\n    },\n    {\n      name: 'type',\n      label: 'Select type:',\n      selectType: true,\n      options: ['camping', 'bonfire', 'view'],\n      default: 'camping'\n    }\n  ]\n  const buttonTitle = 'Add to the map';\n\n  return (\n    context.mode === 'explore' ? null :\n    <PostForm onSucessPost={onSucessPost} apiPath={apiPath}\n    formTitle={formTitle} additionalInputs={additionalInputs}\n    inputs={inputs} buttonTitle={buttonTitle} />\n  )\n \n}\nexport default Form;","import { BallSpinner } from \"react-spinners-kit\";\nimport React from 'react';\n\n\nfunction Loader(props){\n    return (\n        <BallSpinner\n        size={props.size}\n        color=\"#686769\"\n        loading={props.loading}\n    />\n    );\n}\n\nexport default Loader;","import React from 'react';\n\nimport Form from './Form';\nimport Loader from './Loader'\n\n\nimport camping from '../icons/039-tent.svg';\nimport bonfire from '../icons/010-bonfire.svg';\nimport viewPoint from '../icons/009-binoculars.svg';\n\nimport { MyContext } from '../contexts/MyContextProvider';\n\nimport { config } from '../url_config'\n\nimport { fromLonLat, toLonLat } from 'ol/proj';\nimport 'ol/ol.css';\nimport { Map as OlMap, View } from 'ol';\nimport TileLayer from 'ol/layer/Tile';\nimport OSM from 'ol/source/OSM';\nimport { Vector as VectorLayer } from 'ol/layer';\nimport { Vector as VectorSource } from 'ol/source';\nimport Feature from 'ol/Feature';\nimport Point from 'ol/geom/Point';\nimport { Icon, Style } from 'ol/style.js';\n\nconst url = config.url.API_URL\n\nconst iconMapping = {\n  camping: camping,\n  bonfire: bonfire,\n  view: viewPoint\n};\n\n\nclass Map extends React.Component {\n\n  constructor(props){\n    super(props);\n    this.map = null;\n    \n    this.center = () => {\n      this.map.getView().setCenter(fromLonLat(this.context.getPointIdData().localisation));\n      this.map.getView().setZoom(13);\n    }\n  }\n  \n  componentDidMount() {\n    const extraLayer = new VectorLayer({\n      source: new VectorSource({\n        features: []\n      })\n    });\n    const featuresLayer = new VectorLayer({\n      source: new VectorSource({\n        features: []\n      })\n    });\n\n    this.map = new OlMap({\n      target: this.refs.mapContainer, //change to createRef API!!\n      layers: [\n        new TileLayer({\n          source: new OSM()\n        }),\n        extraLayer,\n        featuresLayer\n      ], view: new View({\n        center: fromLonLat([this.context.lon, this.context.lat]),\n        zoom: 6,\n      })\n    });\n    const handleMapClick = (event) => {\n      if (this.context.mode === 'explore') {\n        let pointId = null;\n        this.map.forEachFeatureAtPixel(event.pixel,\n          feature => {\n            pointId = feature.get('id') || null;\n          });\n\n        const newPath = pointId === null ?\n          '/location/' :\n          '/location/' + pointId;\n        this.props.history.push(newPath);\n\n      } else if (this.context.mode === 'edit') {\n        ///////drawing a point/////////\n        const coord = toLonLat(event.coordinate);\n        this.context.setLon(coord[0]);\n        this.context.setLat(coord[1]);\n\n        const features = [];\n\n        const coords = event.coordinate;\n        const newFeature = new Feature({\n          geometry: new Point(coords)\n        })\n\n        features.push(newFeature);\n\n        this.state.extraLayer.setSource(\n          new VectorSource({\n            features: features\n          })\n        );\n      }\n    }\n    this.map.on('click', handleMapClick);\n\n    this.setState({\n      // map: map,\n      extraLayer: extraLayer,\n      featuresLayer: featuresLayer\n    });\n  }\n\n  componentDidUpdate() {\n    if (this.context.data === null ||this.state.featuresLayer.values_.source.isEmpty()) {\n      fetch(url + '/api/points')\n        .then(res => res.json())\n        .then(data => {\n          const features = [];\n          data.forEach((e) => {\n            const icon = new Icon({\n              opacity: 1,\n              scale: 0.05,\n              src: iconMapping[e.type]\n            });\n\n            const iconStyle = new Style({\n              image: icon\n            });\n\n            const coords = fromLonLat(e.localisation);\n            const iconFeature = new Feature({\n              id: e._id,\n              geometry: new Point(coords),\n              name: e.name,\n              description: e.description,\n              rating: e.rating\n            });\n            iconFeature.setStyle(iconStyle);\n            features.push(iconFeature);\n          })\n\n          this.state.featuresLayer.setSource(\n            new VectorSource({\n              features: features\n            })\n          );\n          this.context.setData(data);\n        })\n        .catch(error => console.log(error));\n    }\n  }\n\n\n  render() {\n    return (\n      <div>\n        <Loader size={100} loading={!this.context.data}></Loader>\n        <div ref=\"mapContainer\" id=\"mapContainer\"></div>\n        {(!this.context.pointId || this.context.mode === 'edit') ?\n      '' :\n        <button onClick={this.center}>center on location</button>\n        }\n        <Form/>\n      </div>\n    );\n  }\n}\n\nMap.contextType = MyContext;\nexport default Map;","import styled from 'styled-components';\n\nexport const ProfileImage = styled.img`\n  border-radius: 100%;\n  height: 3em;\n`;\n\nexport const SmallProfileImage = styled.img`\n  border-radius: 100%;\n  height: 1.5em;\n`;\n","import React, {useContext} from 'react';\nimport { SmallProfileImage } from '../styled-components/ProfileImage';\nimport { AuthContext } from '../contexts/AuthContextProvider';\n\n\nfunction ReviewCard(props) {\n  const authContext = useContext(AuthContext);\n\n  return (\n    <div className=\"ReviewCard flexcontainercolumn\">\n      <br></br>\n      <h5>{props.e.title}</h5>\n      <p> {props.e.description} </p>\n      <h5>rated: {props.e.rating}</h5>\n      {authContext.isAuthenticated ?\n        <SmallProfileImage src={props.e.profilePicture} alt=\"Profile\" /> : ''\n      }\n    </div>\n\n  )\n}\n\nexport default ReviewCard;","import React, { useState, useContext, useEffect } from 'react';\nimport { config } from '../url_config'\nimport { MyContext } from '../contexts/MyContextProvider';\nimport { AuthContext } from '../contexts/AuthContextProvider';\nimport { SmallProfileImage } from '../styled-components/ProfileImage';\nimport  ReviewCard from './ReviewCard';\n\nconst url = config.url.API_URL\n\nfunction Description(props) {\n  const context = useContext(MyContext);\n  const authContext = useContext(AuthContext);\n\n  const [reviews, setReviews] = useState('');\n  const [pointData, setPointData] = useState(null);\n\n  useEffect(() => {\n    setReviews('');\n    if (context.data) {\n      const pointData = context.data.find(e =>\n        e._id === context.pointId);\n      setPointData(pointData);\n    }\n  }, [context.data, context.pointId]);\n\n  const fetchReviews = () => {\n    fetch(url + \"/api/points/\" + context.pointId)\n      .then(res => res.json())\n      .then(res => {\n        const rev = res.map((e, index) => {\n          return (\n           <ReviewCard e={e} key={index}/>\n          )\n        })\n        setReviews(rev);\n      });\n  }\n\n  const submitReview = (e) => {\n    e.preventDefault();\n    const dataForm = new URLSearchParams();\n    for (const pair of new FormData(e.target)) {\n      dataForm.append(pair[0], pair[1]);\n    }\n\n    fetch(url + \"/api/points/\" + context.pointId, {\n      method: 'POST',\n      headers: {\n        'Authorization': 'Bearer ' + authContext.jwToken,\n        'Content-Type': 'application/x-www-form-urlencoded'\n      },\n      body: dataForm,\n      withCredentials: true,\n      credentials: 'include'\n    })\n      .then(res => res.json())\n      .then((res) => {\n        setPointData({ ...pointData, rating: res.newRating })\n      });\n  }\n\n  return (\n    (!pointData || context.mode === 'edit') ?\n      '' :\n      <div className=\"flexcontainercolumn\">\n        <h1>\n          {pointData.name}\n        </h1>\n        <p>\n          {pointData.description}\n        </p>\n        <h5>\n          rating: {pointData.rating}\n        </h5>\n        {authContext.isAuthenticated ?\n          <p>\n            created by: <SmallProfileImage src={pointData.profilePicture} alt=\"Profile\" />\n          </p> : ''\n        }\n\n        <button type=\"click\" onClick={fetchReviews} className=\"btn btn-dark btn-sm\">Show reviews</button>\n\n        {reviews}\n\n        {authContext.isAuthenticated ?\n          <form className=\"container\" onSubmit={submitReview}>\n            <div className=\"row\">\n              <div className=\"col-sm\">\n                <label htmlFor=\"title\">Title:</label>\n                <input className=\"form-control input-sm\" placeholder=\"title\" required name=\"title\" id=\"title\"></input>\n              </div>\n              <div className=\"col-sm\">\n                <label htmlFor=\"description\">Description:</label>\n                <input className=\"form-control input-sm\" placeholder=\"description\" name=\"description\" id=\"description\"></input>\n              </div>\n              <div className=\"col-sm\">\n                <label htmlFor=\"rating\">Rating:</label>\n                <input className=\"form-control input-sm\" placeholder=\"1-10\" required min=\"1\" max=\"10\" name=\"rating\" id=\"rating\" type=\"number\"></input>\n              </div>\n            </div>\n            <div className=\"flexcontainer\">\n              <button type=\"submit\" className=\" btn btn-dark btn-bg\">Review</button>\n            </div>\n          </form> : ''\n        }\n      </div>\n\n  )\n}\n\nexport default Description;","import React, { useContext, useEffect } from 'react';\nimport Map from '../components/Map';\nimport Description from '../components/Description';\nimport { MyContext } from '../contexts/MyContextProvider';\nimport { AuthContext } from '../contexts/AuthContextProvider';\n\nimport { config } from '../url_config'\n\n\nfunction Location(props) {\n  const context = useContext(MyContext);\n  const authContext = useContext(AuthContext);\n\n  \n  useEffect(() => {\n    const pathPointId = props.location.pathname.match(/[^/]+$/) ?\n      props.location.pathname.match(/[^/]+$/)[0] : null;\n    if (context.pointId !== pathPointId) {\n      context.setPointId(pathPointId);\n    }\n  }, [props.location.pathname])\n\n  const addToFavourites = () => {\n    const data = new URLSearchParams();\n    data.append('locationId', context.pointId);\n    fetch(config.url.API_URL + '/api/profiles/favourites', {\n        method: 'POST',\n        headers: {\n          'Authorization': 'Bearer ' + authContext.jwToken,\n          'Content-Type': 'application/x-www-form-urlencoded'\n        },\n        body: data\n      })\n        .then((res) => {\n          console.log(res);\n        })\n  }\n\n  return (\n    <div>\n      <Map history={props.history}></Map>\n      <button onClick={addToFavourites}>add to favourites</button>\n      <Description></Description>\n    </div>\n  );\n}\n\nexport default Location;","import React, { useContext } from 'react';\n\nimport Location from './Location';\nimport { Route } from 'react-router-dom';\nimport { MyContext } from '../contexts/MyContextProvider';\nimport { AuthContext } from '../contexts/AuthContextProvider';\n\n\n\nfunction App() {\n  const context = useContext(MyContext);\n  const authContext = useContext(AuthContext);\n\n  const switchText = (context.mode === 'explore') ? 'Edit map' : 'Explore';\n\n  return (\n\n    <div className=\"App\">\n      { authContext.isAuthenticated ? \n      <button id=\"switch modes\" onClick={context.switchMode}>{switchText}</button> :\n      null\n    }\n      {context.redirect}\n      <Route path=\"/\" component={Location} />\n    </div>\n  );\n}\n\nexport default App;\n","import React, { useContext, useEffect, useState } from 'react';\nimport { AuthContext } from '../contexts/AuthContextProvider';\nimport { MyContext } from '../contexts/MyContextProvider';\nimport { Link } from 'react-router-dom';\nimport { config } from '../url_config'\nimport Loader from '../components/Loader'\n\nconst url = config.url.API_URL\n\n\nfunction Profile(props) {\n  const authContext = useContext(AuthContext);\n  const context = useContext(MyContext);\n\n  const [profileData, setProfileData] = useState(null);\n\n  if (!authContext.isAuthenticated) {\n    props.history.push('/')\n  };\n\n  useEffect(() => {\n    fetch(url + '/api/profiles', { \n      method: 'GET',\n      credentials: 'include',\n      headers: {\n        'Authorization': 'Bearer ' + authContext.jwToken\n      } \n    })\n      .then(res => res.json())\n      .then(data => {\n        setProfileData(data)\n      }\n      );\n  }, [])\n\n  return (\n\n    <div className=\"Profile\">\n      {profileData ?\n      <div className=\"flexcontainercolumn\">\n        <h2>{profileData.user.name}</h2>\n        <h4>Your locations:\n        </h4>\n        {profileData.locations.map(location => {\n          return   <Link to={\"/location/\"+location._id} key={location.name}>{location.name}</Link>\n        })}\n          <h4>Your favourites:\n        </h4>\n        {profileData.user.favourites.map(location => {\n          return   <Link to={\"/location/\"+location} key={location.name}>{context.getPointIdData(location).name}</Link>\n        })}\n         </div>\n        :\n        <Loader size={80} loading={true}/>}\n\n\n    </div>\n  );\n}\n\nexport default Profile;\n","import React, { useContext } from 'react';\nimport App from './views/App';\nimport Profile from './views/Profile';\nimport { Route, BrowserRouter as Router, Link, Redirect, Switch } from 'react-router-dom';\nimport FacebookLogin from 'react-facebook-login';\nimport { AuthContext } from './contexts/AuthContextProvider';\nimport { MyContext } from './contexts/MyContextProvider';\nimport { ProfileImage } from './styled-components/ProfileImage';\nimport { config } from './url_config'\nconst url = config.url.API_URL\n\n\nfunction Main() {\n  const authContext = useContext(AuthContext);\n  const context = useContext(MyContext);\n\n  const logout = () => {\n    authContext.setIsAuthenticated(false);\n    authContext.setUser(null);\n    authContext.setJwToken(null);\n    context.setMode('explore');\n  };\n\n  const facebookResponse = (response) => {\n    // store data in local storage\n\n    const options = {\n      method: 'POST',\n      body: `access_token=${response.accessToken}`,\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded'\n      },\n      mode: 'cors',\n      cache: 'default'\n    };\n\n    fetch(url + '/api/auth/facebook', options) \n      .then(r => {\n        const token = r.headers.get('x-auth-token');\n        r.json().then(user => {\n          if (token) {\n            authContext.setIsAuthenticated(true);\n            authContext.setUser(user._id);\n            authContext.setJwToken(token);\n            authContext.setPicture(user.photoUrl);\n          }\n        });\n      })\n      \n  }\n  const profileLink = authContext.picture ?\n  <ProfileImage src={authContext.picture} alt=\"Profile\" /> : 'Profile';\n\n  return (\n    \n      <Router basename={process.env.PUBLIC_URL}>\n        <nav className=\"navbar navbar-dark bg-dark\">\n          <h1 className=\"text-light\">\n            Your Map Space\n          </h1>\n          {authContext.isAuthenticated ?\n            <button onClick={logout} className=\"button\">\n              Log out\n            </button>\n            :\n            <FacebookLogin\n              appId={config.app_id.FACEBOOK_APPID}\n              autoLoad={true}\n              fields=\"name,email,picture\"\n              callback={facebookResponse} />\n          }\n          { authContext.isAuthenticated ? <Link to='/profile'>{profileLink}</Link>\n            : ''}\n        </nav>\n\n        <Switch>\n          <Route path=\"/location\" component={App} />\n          <Route exact path=\"/\">\n            <Redirect to=\"/location\"></Redirect>\n          </Route>\n          <Route path=\"/profile\" component={Profile} />\n        </Switch>\n      </Router>\n  );\n}\n\nexport default Main;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport Main from './Main';\nimport './index.css';\nimport 'bootstrap/dist/css/bootstrap.css';\nimport AuthContextProvider from './contexts/AuthContextProvider';\nimport MyContextProvider from './contexts/MyContextProvider';\n\n\nReactDOM.render(\n  <MyContextProvider>\n    <AuthContextProvider>\n      <Main />\n    </AuthContextProvider>\n  </MyContextProvider>\n  , document.getElementById('root'));\n\n\n","module.exports = __webpack_public_path__ + \"static/media/039-tent.ebd03a54.svg\";","module.exports = __webpack_public_path__ + \"static/media/010-bonfire.21b76057.svg\";","module.exports = __webpack_public_path__ + \"static/media/009-binoculars.6b6a714c.svg\";"],"sourceRoot":""}