{"version":3,"sources":["url_config.js","contexts/MyContextProvider.js","components/Form.js","components/Map.js","contexts/AuthContextProvider.js","components/Description.js","views/Location.js","views/App.js","views/Profile.js","styled-components/ProfileImage.js","Main.js","index.js","icons/039-tent.svg","icons/010-bonfire.svg","icons/009-binoculars.svg"],"names":["config","url","API_URL","app_id","FACEBOOK_APPID","MyContext","React","createContext","MyContextProvider","props","_useState","useState","_useState2","Object","slicedToArray","pointId","setPointId","_useState3","_useState4","mode","setMode","_useState5","_useState6","data","setData","state","switchMode","react_default","a","createElement","Provider","value","children","Form","context","useContext","className","onSubmit","e","preventDefault","URLSearchParams","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","FormData","target","Symbol","iterator","next","done","pair","append","err","return","fetch","method","headers","Content-Type","body","then","res","action","readOnly","type","step","name","id","lon","lat","htmlFor","required","placeholder","iconMapping","camping","bonfire","view","viewPoint","Map","_this","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","_this2","extraLayer","VectorLayer","source","VectorSource","features","featuresLayer","map","OlMap","refs","mapContainer","layers","TileLayer","OSM","View","center","fromLonLat","zoom","on","event","forEachFeatureAtPixel","pixel","feature","get","newPath","history","push","coord","toLonLat","coordinate","setState","coords","newFeature","Feature","geometry","Point","setSource","_this3","console","log","json","forEach","icon","Icon","opacity","scale","src","iconStyle","Style","image","localisation","iconFeature","_id","description","rating","setStyle","catch","error","ref","components_Form","Component","contextType","AuthContext","AuthContextProvider","isAuthenticated","setIsAuthenticated","user","setUser","picture","setPicture","_useState7","_useState8","jwToken","setJwToken","Description","authContext","reviews","setReviews","pointData","setPointData","useEffect","find","onClick","rev","title","dataForm","Authorization","withCredentials","credentials","objectSpread","newRating","min","max","Location","pathPointId","location","pathname","match","components_Map","components_Description","App","switchText","redirect","react_router","path","component","Profile","profileData","setProfileData","ProfileImage","styled","img","_templateObject","Main","profileLink","alt","react_router_dom","basename","process","facebook_login_with_button_default","appId","autoLoad","fields","callback","response","options","concat","accessToken","cache","r","token","photoUrl","to","exact","ReactDOM","render","contexts_MyContextProvider","contexts_AuthContextProvider","src_Main","document","getElementById","module","exports","__webpack_require__","p"],"mappings":"2OAiBaA,EAhBA,CACTC,IAAK,CACDC,QAAS,4CAEbC,OAAQ,CACNC,eAAgB,4BCLTC,EAAYC,IAAMC,cAAc,IA4B9BC,MA1Bf,SAA2BC,GAAO,IAAAC,EACAC,mBAAS,MADTC,EAAAC,OAAAC,EAAA,EAAAD,CAAAH,EAAA,GACvBK,EADuBH,EAAA,GACdI,EADcJ,EAAA,GAAAK,EAENN,mBAAS,WAFHO,EAAAL,OAAAC,EAAA,EAAAD,CAAAI,EAAA,GAEvBE,EAFuBD,EAAA,GAEjBE,EAFiBF,EAAA,GAAAG,EAGNV,mBAAS,MAHHW,EAAAT,OAAAC,EAAA,EAAAD,CAAAQ,EAAA,GAGvBE,EAHuBD,EAAA,GAGjBE,EAHiBF,EAAA,GAUxBG,EAAQ,CACVV,UACAC,aACAG,OACAC,UACAM,WAVe,WAEfN,EAD0B,YAATD,EAAsB,OAAS,YAUhDI,OACAC,WAEJ,OACIG,EAAAC,EAAAC,cAACxB,EAAUyB,SAAX,CAAoBC,MAAON,GACtBhB,EAAMuB,WCrBb/B,EAAMD,EAAOC,IAAIC,QAiER+B,MA9Df,SAAcxB,GAEV,IAAMyB,EAAUC,qBAAW9B,GAqB3B,MACqB,YAAjB6B,EAAQf,KAAqB,GACzBQ,EAAAC,EAAAC,cAAA,WACIF,EAAAC,EAAAC,cAAA,QAAMO,UAAU,YAAYC,SAvBtB,SAACC,GACfA,EAAEC,iBAEF,IAAMhB,EAAO,IAAIiB,gBAHIC,GAAA,EAAAC,GAAA,EAAAC,OAAAC,EAAA,IAIrB,QAAAC,EAAAC,EAAmB,IAAIC,SAAST,EAAEU,QAAlCC,OAAAC,cAAAT,GAAAI,EAAAC,EAAAK,QAAAC,MAAAX,GAAA,EAA2C,KAAhCY,EAAgCR,EAAAd,MACvCR,EAAK+B,OAAOD,EAAK,GAAIA,EAAK,KALT,MAAAE,GAAAb,GAAA,EAAAC,EAAAY,EAAA,YAAAd,GAAA,MAAAK,EAAAU,QAAAV,EAAAU,SAAA,WAAAd,EAAA,MAAAC,GAQrBc,MAAMxD,EAAM,cAAe,CACvByD,OAAQ,OACRC,QAAS,CACLC,eAAgB,qCAEpBC,KAAMtC,IAELuC,KAAK,SAACC,GACH7B,EAAQV,QAAQ,SAOiCwC,OAAO,mCAAmCN,OAAO,QAE9F/B,EAAAC,EAAAC,cAAA,OAAKO,UAAU,iBACXT,EAAAC,EAAAC,cAAA,gCACAF,EAAAC,EAAAC,cAAA,SAAOO,UAAU,SAAS6B,UAAQ,EAACC,KAAK,SAASC,KAAK,MAAMC,KAAK,MAAMC,GAAG,MAAMtC,MAAOtB,EAAM6D,MAC7F3C,EAAAC,EAAAC,cAAA,SAAOO,UAAU,SAAS6B,UAAQ,EAACC,KAAK,SAASC,KAAK,MAAMC,KAAK,MAAMC,GAAG,MAAMtC,MAAOtB,EAAM8D,OAEjG5C,EAAAC,EAAAC,cAAA,OAAKO,UAAU,OACXT,EAAAC,EAAAC,cAAA,OAAKO,UAAU,UACXT,EAAAC,EAAAC,cAAA,SAAO2C,QAAQ,QAAf,SACA7C,EAAAC,EAAAC,cAAA,SAAO4C,UAAQ,EAACrC,UAAU,wBAAwBsC,YAAY,aAAaR,KAAK,OAAOE,KAAK,OAAOC,GAAG,UAE1G1C,EAAAC,EAAAC,cAAA,OAAKO,UAAU,UACXT,EAAAC,EAAAC,cAAA,SAAO2C,QAAQ,eAAf,gBACA7C,EAAAC,EAAAC,cAAA,SAAOO,UAAU,wBAAwBsC,YAAY,mBAAmBR,KAAK,OAAOE,KAAK,cAAcC,GAAG,iBAE9G1C,EAAAC,EAAAC,cAAA,OAAKO,UAAU,UACXT,EAAAC,EAAAC,cAAA,SAAO2C,QAAQ,QAAf,gBACA7C,EAAAC,EAAAC,cAAA,UAAQO,UAAU,wBAAwBiC,GAAG,OAAOD,KAAK,QACrDzC,EAAAC,EAAAC,cAAA,yBACAF,EAAAC,EAAAC,cAAA,yBACAF,EAAAC,EAAAC,cAAA,yBAIZF,EAAAC,EAAAC,cAAA,OAAKO,UAAU,iBACXT,EAAAC,EAAAC,cAAA,UAAQqC,KAAK,SAAS9B,UAAU,uBAAhC,+KCnClBnC,EAAMD,EAAOC,IAAIC,QAEjByE,EAAc,CAClBC,QAASA,IACTC,QAASA,IACTC,KAAMC,KAGFC,cACJ,SAAAA,EAAYvE,GAAO,IAAAwE,EAAA,OAAApE,OAAAqE,EAAA,EAAArE,CAAAsE,KAAAH,IACjBC,EAAApE,OAAAuE,EAAA,EAAAvE,CAAAsE,KAAAtE,OAAAwE,EAAA,EAAAxE,CAAAmE,GAAAM,KAAAH,KAAM1E,KACDgB,MAAS,CACZ6C,IAAK,mBACLC,IAAK,mBAJUU,mFAQC,IAAAM,EAAAJ,KACZK,EAAa,IAAIC,IAAY,CACjCC,OAAQ,IAAIC,IAAa,CACvBC,SAAU,OAGRC,EAAgB,IAAIJ,IAAY,CACpCC,OAAQ,IAAIC,IAAa,CACvBC,SAAU,OAIRE,EAAM,IAAIC,IAAM,CACpB/C,OAAQmC,KAAKa,KAAKC,aAClBC,OAAQ,CACN,IAAIC,IAAU,CACZT,OAAQ,IAAIU,MAEdZ,EACAK,GACCf,KAAM,IAAIuB,IAAK,CAChBC,OAAQC,YAAW,CAACpB,KAAK1D,MAAM6C,IAAKa,KAAK1D,MAAM8C,MAC/CiC,KAAM,OAwCVV,EAAIW,GAAG,QArCgB,SAACC,GACtB,GAA0B,YAAtBnB,EAAKrD,QAAQf,KAAoB,CACnC,IAAIJ,EAAU,KACdwE,EAAK9D,MAAMqE,IAAIa,sBAAsBD,EAAME,MACzC,SAAAC,GACE9F,EAAU8F,EAAQC,IAAI,OAAS,OAGnC,IAAMC,EAAsB,OAAZhG,EACd,aACA,aAAeA,EACjBwE,EAAK9E,MAAMuG,QAAQC,KAAKF,QAEnB,GAA0B,SAAtBxB,EAAKrD,QAAQf,KAAiB,CAEvC,IAAM+F,EAAQC,YAAST,EAAMU,YAC7B7B,EAAK8B,SAAS,CACZ/C,IAAK4C,EAAM,GACX3C,IAAK2C,EAAM,KAGb,IAAMtB,EAAW,GAEX0B,EAASZ,EAAMU,WACfG,EAAa,IAAIC,IAAQ,CAC7BC,SAAU,IAAIC,IAAMJ,KAGtB1B,EAASqB,KAAKM,GAEdhC,EAAK9D,MAAM+D,WAAWmC,UACpB,IAAIhC,IAAa,CACfC,SAAUA,QAOlBT,KAAKkC,SAAS,CACZvB,IAAKA,EACLN,WAAYA,EACZK,cAAeA,iDAIE,IAAA+B,EAAAzC,KAEO,OAAtBA,KAAKjD,QAAQX,OACfsG,QAAQC,IAAI7H,EAAM,eAClBwD,MAAMxD,EAAM,eACT6D,KAAK,SAAAC,GAAG,OAAIA,EAAIgE,SAChBjE,KAAK,SAAAvC,GACJ,IAAMqE,EAAW,GACjBrE,EAAKyG,QAAQ,SAAC1F,GACZ,IAAM2F,EAAO,IAAIC,IAAK,CACpBC,QAAS,EACTC,MAAO,IACPC,IAAK1D,EAAYrC,EAAE4B,QAGfoE,EAAY,IAAIC,IAAM,CAC1BC,MAAOP,IAGHX,EAASf,YAAWjE,EAAEmG,cACtBC,EAAc,IAAIlB,IAAQ,CAC9BnD,GAAI/B,EAAEqG,IACNlB,SAAU,IAAIC,IAAMJ,GACpBlD,KAAM9B,EAAE8B,KACRwE,YAAatG,EAAEsG,YACfC,OAAQvG,EAAEuG,SAEZH,EAAYI,SAASR,GACrB1C,EAASqB,KAAKyB,KAGhBd,EAAKnG,MAAMoE,cAAc8B,UACvB,IAAIhC,IAAa,CACfC,SAAUA,KAGdgC,EAAK1F,QAAQV,QAAQD,KAEtBwH,MAAM,SAAAC,GAAK,OAAInB,QAAQC,IAAIkB,uCAKhC,OACErH,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,OAAKoH,IAAI,eAAe5E,GAAG,iBAC3B1C,EAAAC,EAAAC,cAACqH,EAAD,CAAM5E,IAAKa,KAAK1D,MAAM6C,IAAKC,IAAKY,KAAK1D,MAAM8C,cA9HjCjE,IAAM6I,WAoIxBnE,EAAIoE,YAAc/I,EACH2E,gBCnKFqE,EAAc/I,IAAMC,cAAc,IAyBhC+I,MAvBf,SAA6B7I,GAAO,IAAAC,EACYC,oBAAS,GADrBC,EAAAC,OAAAC,EAAA,EAAAD,CAAAH,EAAA,GAC3B6I,EAD2B3I,EAAA,GACV4I,EADU5I,EAAA,GAAAK,EAEVN,mBAAS,MAFCO,EAAAL,OAAAC,EAAA,EAAAD,CAAAI,EAAA,GAE3BwI,EAF2BvI,EAAA,GAErBwI,EAFqBxI,EAAA,GAAAG,EAGJV,mBAAS,MAHLW,EAAAT,OAAAC,EAAA,EAAAD,CAAAQ,EAAA,GAG3BsI,EAH2BrI,EAAA,GAGlBsI,EAHkBtI,EAAA,GAAAuI,EAIJlJ,mBAAS,MAJLmJ,EAAAjJ,OAAAC,EAAA,EAAAD,CAAAgJ,EAAA,GAM1BpI,EAAQ,CACZ8H,kBACAC,qBACAC,OACAC,UACAK,QAX8BD,EAAA,GAY9BE,WAZ8BF,EAAA,GAa9BH,UACAC,cAEF,OACIjI,EAAAC,EAAAC,cAACwH,EAAYvH,SAAb,CAAsBC,MAAON,GACxBhB,EAAMuB,WCjBb/B,EAAMD,EAAOC,IAAIC,QAuGR+J,MArGf,SAAqBxJ,GACnB,IAAMyB,EAAUC,qBAAW9B,GACrB6J,EAAc/H,qBAAWkH,GAFL3I,EAIIC,mBAAS,IAJbC,EAAAC,OAAAC,EAAA,EAAAD,CAAAH,EAAA,GAInByJ,EAJmBvJ,EAAA,GAIVwJ,EAJUxJ,EAAA,GAAAK,EAKQN,mBAAS,MALjBO,EAAAL,OAAAC,EAAA,EAAAD,CAAAI,EAAA,GAKnBoJ,EALmBnJ,EAAA,GAKRoJ,EALQpJ,EAAA,GAyD1B,OAlDAqJ,oBAAU,WAER,GADAH,EAAW,IACPlI,EAAQX,KAAM,CAChB,IAAM8I,EAAYnI,EAAQX,KAAKiJ,KAAK,SAAAlI,GAAC,OACnCA,EAAEqG,MAAQzG,EAAQnB,UACpBuJ,EAAaD,KAEd,CAACnI,EAAQX,KAAMW,EAAQnB,UA4CtBsJ,GAA8B,SAAjBnI,EAAQf,KAErBQ,EAAAC,EAAAC,cAAA,OAAKO,UAAU,uBACbT,EAAAC,EAAAC,cAAA,UACGwI,EAAUjG,MAEbzC,EAAAC,EAAAC,cAAA,SACGwI,EAAUzB,YACXjH,EAAAC,EAAAC,cAAA,WAFF,WAGWwI,EAAUxB,QAErBlH,EAAAC,EAAAC,cAAA,UAAQqC,KAAK,QAAQuG,QArDN,WACnBhH,MAAMxD,EAAM,eAAiBiC,EAAQnB,SAClC+C,KAAK,SAAAC,GAAG,OAAIA,EAAIgE,SAChBjE,KAAK,SAAAC,GACJ,IAAM2G,EAAM3G,EAAI+B,IAAI,SAAAxD,GAClB,OACEX,EAAAC,EAAAC,cAAA,OAAKO,UAAU,uBACbT,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAAA,UAAKS,EAAEqI,OACPhJ,EAAAC,EAAAC,cAAA,aAAKS,EAAEsG,YAAP,KACAjH,EAAAC,EAAAC,cAAA,oBAAYS,EAAEuG,WAIpBuB,EAAWM,MAuCiCtI,UAAU,uBAAtD,gBAEC+H,EAECD,EAAYX,gBACZ5H,EAAAC,EAAAC,cAAA,QAAMO,UAAU,YAAYC,SAxCf,SAACC,GACpBA,EAAEC,iBACF,IAAMqI,EAAW,IAAIpI,gBAFKC,GAAA,EAAAC,GAAA,EAAAC,OAAAC,EAAA,IAG1B,QAAAC,EAAAC,EAAmB,IAAIC,SAAST,EAAEU,QAAlCC,OAAAC,cAAAT,GAAAI,EAAAC,EAAAK,QAAAC,MAAAX,GAAA,EAA2C,KAAhCY,EAAgCR,EAAAd,MACzC6I,EAAStH,OAAOD,EAAK,GAAIA,EAAK,KAJN,MAAAE,GAAAb,GAAA,EAAAC,EAAAY,EAAA,YAAAd,GAAA,MAAAK,EAAAU,QAAAV,EAAAU,SAAA,WAAAd,EAAA,MAAAC,GAO1Bc,MAAMxD,EAAM,eAAiBiC,EAAQnB,QAAS,CAC5C2C,OAAQ,OACRC,QAAS,CACPkH,cAAiB,UAAYX,EAAYH,QACzCnG,eAAgB,qCAElBC,KAAM+G,EACNE,iBAAiB,EACjBC,YAAa,YAEZjH,KAAK,SAAAC,GAAG,OAAIA,EAAIgE,SAChBjE,KAAK,SAACC,GACLuG,EAAazJ,OAAAmK,EAAA,EAAAnK,CAAA,GAAKwJ,EAAN,CAAiBxB,OAAQ9E,EAAIkH,iBAsBvCtJ,EAAAC,EAAAC,cAAA,OAAKO,UAAU,OACbT,EAAAC,EAAAC,cAAA,OAAKO,UAAU,UACbT,EAAAC,EAAAC,cAAA,SAAO2C,QAAQ,SAAf,UACA7C,EAAAC,EAAAC,cAAA,SAAOO,UAAU,wBAAwBsC,YAAY,QAAQD,UAAQ,EAACL,KAAK,QAAQC,GAAG,WAExF1C,EAAAC,EAAAC,cAAA,OAAKO,UAAU,UACbT,EAAAC,EAAAC,cAAA,SAAO2C,QAAQ,eAAf,gBACA7C,EAAAC,EAAAC,cAAA,SAAOO,UAAU,wBAAwBsC,YAAY,cAAcN,KAAK,cAAcC,GAAG,iBAE3F1C,EAAAC,EAAAC,cAAA,OAAKO,UAAU,UACbT,EAAAC,EAAAC,cAAA,SAAO2C,QAAQ,UAAf,WACA7C,EAAAC,EAAAC,cAAA,SAAOO,UAAU,wBAAwBsC,YAAY,OAAOD,UAAQ,EAACyG,IAAI,IAAIC,IAAI,KAAK/G,KAAK,SAASC,GAAG,SAASH,KAAK,aAGzHvC,EAAAC,EAAAC,cAAA,OAAKO,UAAU,iBACbT,EAAAC,EAAAC,cAAA,UAAQqC,KAAK,SAAS9B,UAAU,wBAAhC,YAEM,IAjCZ,ICxCSgJ,MApBf,SAAkB3K,GAChB,IAAMyB,EAAUC,qBAAW9B,GAW3B,OATAkK,oBAAU,WACR,IAAMc,EAAc5K,EAAM6K,SAASC,SAASC,MAAM,WAChD/K,EAAM6K,SAASC,SAASC,MAAM,WAAU,GAAK,KAC3CtJ,EAAQnB,UAAYsK,GACtBnJ,EAAQlB,WAAWqK,IAEpB,CAAC5K,EAAM6K,SAASC,WAIjB5J,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAC4J,EAAD,CAAKzE,QAASvG,EAAMuG,UACpBrF,EAAAC,EAAAC,cAAC6J,EAAD,gBCQSC,MAnBf,WACE,IAAMzJ,EAAUC,qBAAW9B,GACrB6J,EAAc/H,qBAAWkH,GAEzBuC,EAA+B,YAAjB1J,EAAQf,KAAsB,WAAa,UAE/D,OAEEQ,EAAAC,EAAAC,cAAA,OAAKO,UAAU,OACX8H,EAAYX,gBACd5H,EAAAC,EAAAC,cAAA,UAAQwC,GAAG,eAAeoG,QAASvI,EAAQR,YAAakK,GACxD,KAEC1J,EAAQ2J,SACTlK,EAAAC,EAAAC,cAACiK,EAAA,EAAD,CAAOC,KAAK,IAAIC,UAAWZ,MCpB3BnL,EAAMD,EAAOC,IAAIC,QAwCR+L,MArCf,SAAiBxL,GACf,IAAMyJ,EAAc/H,qBAAWkH,GADT3I,EAEgBC,mBAAS,MAFzBC,EAAAC,OAAAC,EAAA,EAAAD,CAAAH,EAAA,GAEfwL,EAFetL,EAAA,GAEFuL,EAFEvL,EAAA,GAwBtB,OApBKsJ,EAAYX,iBACf9I,EAAMuG,QAAQC,KAAK,KAGrBsD,oBAAU,WACR9G,MAAMxD,EAAM,gBAAiB,CAC3ByD,OAAQ,MACRoH,iBAAiB,EACjBC,YAAa,UACbpH,QAAS,CACPkH,cAAiB,UAAYX,EAAYH,WAG1CjG,KAAK,SAAAC,GAAG,OAAIA,EAAIgE,SAChBjE,KAAK,SAAAvC,GACJ4K,EAAe5K,MAGlB,IAIDI,EAAAC,EAAAC,cAAA,OAAKO,UAAU,WAAf,qBACoBT,EAAAC,EAAAC,cAAA,WACjBqK,EACC,SACA,4JClCD,IAAME,SAAeC,EAAOC,IAAVC,KCOnBtM,GAAMD,EAAOC,IAAIC,QA6ERsM,OA1Ef,WACE,IAAMtC,EAAc/H,qBAAWkH,GACzBnH,EAAUC,qBAAW9B,GAmCrBoM,EAAcvC,EAAYP,QAChChI,EAAAC,EAAAC,cAACuK,GAAD,CAAc/D,IAAK6B,EAAYP,QAAS+C,IAAI,YAAe,UAG3D,OADA7E,QAAQC,IAAI9H,EAAOG,OAAOC,gBAGtBuB,EAAAC,EAAAC,cAAC8K,EAAA,EAAD,CAAQC,SAAUC,iBAChBlL,EAAAC,EAAAC,cAAA,OAAKO,UAAU,8BACbT,EAAAC,EAAAC,cAAA,MAAIO,UAAU,cAAd,kBAGC8H,EAAYX,gBACX5H,EAAAC,EAAAC,cAAA,UAAQ4I,QA7CH,WACbP,EAAYV,oBAAmB,GAC/BU,EAAYR,QAAQ,MACpBQ,EAAYF,WAAW,MACvB9H,EAAQd,QAAQ,YAyCiBgB,UAAU,UAAnC,WAIAT,EAAAC,EAAAC,cAACiL,EAAAlL,EAAD,CACEmL,MAAO/M,EAAOG,OAAOC,eACrB4M,UAAU,EACVC,OAAO,qBACPC,SA9Ca,SAACC,GAGxB,IAAMC,EAAU,CACd1J,OAAQ,OACRG,KAAI,gBAAAwJ,OAAkBF,EAASG,aAC/B3J,QAAS,CACPC,eAAgB,qCAElBzC,KAAM,OACNoM,MAAO,WAGT9J,MAAMxD,GAAM,qBAAsBmN,GAC/BtJ,KAAK,SAAA0J,GACJ,IAAMC,EAAQD,EAAE7J,QAAQmD,IAAI,gBAC5B0G,EAAEzF,OAAOjE,KAAK,SAAA2F,GACRgE,IACFvD,EAAYV,oBAAmB,GAC/BU,EAAYR,QAAQD,EAAKd,KACzBuB,EAAYF,WAAWyD,GACvBvD,EAAYN,WAAWH,EAAKiE,kBA2B5BxD,EAAYX,gBAAkB5H,EAAAC,EAAAC,cAAC8K,EAAA,EAAD,CAAMgB,GAAG,YAAYlB,GACjD,IAGN9K,EAAAC,EAAAC,cAACiK,EAAA,EAAD,KACEnK,EAAAC,EAAAC,cAACiK,EAAA,EAAD,CAAOC,KAAK,YAAYC,UAAWL,IACnChK,EAAAC,EAAAC,cAACiK,EAAA,EAAD,CAAO8B,OAAK,EAAC7B,KAAK,KAChBpK,EAAAC,EAAAC,cAACiK,EAAA,EAAD,CAAU6B,GAAG,eAEfhM,EAAAC,EAAAC,cAACiK,EAAA,EAAD,CAAOC,KAAK,WAAWC,UAAWC,qBCxE5C4B,IAASC,OACPnM,EAAAC,EAAAC,cAACkM,EAAD,KACEpM,EAAAC,EAAAC,cAACmM,EAAD,KACErM,EAAAC,EAAAC,cAACoM,GAAD,QAGFC,SAASC,eAAe,6BCd5BC,EAAAC,QAAiBC,EAAAC,EAAuB,yDCAxCH,EAAAC,QAAiBC,EAAAC,EAAuB,4DCAxCH,EAAAC,QAAiBC,EAAAC,EAAuB","file":"static/js/main.2ebd0321.chunk.js","sourcesContent":["\nconst prod = {\n    url: {\n        API_URL: 'https://db-truso-map-space.herokuapp.com'\n    },\n    app_id: {\n      FACEBOOK_APPID: '383464965621720'\n    }\n};\nconst dev = {\n    url: {\n        API_URL: 'http://localhost:8000'\n    },\n    app_id: {\n      FACEBOOK_APPID: '547631249107961'\n    }\n};\nexport const config = process.env.NODE_ENV === 'development' ? dev: prod;","import React, { useState } from 'react'\nexport const MyContext = React.createContext({})\n\nfunction MyContextProvider(props) {\n    const [pointId, setPointId] = useState(null);\n    const [mode, setMode] = useState('explore');\n    const [data, setData] = useState(null);\n\n    const switchMode = () => {\n        const newMode = (mode === 'explore') ? 'edit' : 'explore';\n        setMode(newMode);\n    };\n\n    const state = {\n        pointId,\n        setPointId,\n        mode,\n        setMode,\n        switchMode,\n        data,\n        setData\n    }\n    return (\n        <MyContext.Provider value={state}>\n            {props.children}\n        </MyContext.Provider>\n    )\n\n}\nexport default MyContextProvider\n","import React, { useContext } from 'react';\nimport { config } from '../url_config'\nimport { MyContext } from '../contexts/MyContextProvider';\nconst url = config.url.API_URL\n\n\nfunction Form(props) {\n\n    const context = useContext(MyContext);\n    const postPoint = (e) => {\n        e.preventDefault();\n\n        const data = new URLSearchParams();\n        for (const pair of new FormData(e.target)) {\n            data.append(pair[0], pair[1]);\n        }\n\n        fetch(url + \"/api/points\", {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/x-www-form-urlencoded'\n            },\n            body: data\n        })\n            .then((res) => {\n                context.setData(null);\n            })\n    }\n\n    return (\n        context.mode === 'explore' ? '' :\n            <div>\n                <form className=\"container\" onSubmit={postPoint} action=\"http://localhost:8000/api/points\" method=\"post\" >\n\n                    <div className=\"flexcontainer\">\n                        <h3>Add new location  </h3>\n                        <input className=\"d-none\" readOnly type=\"number\" step=\"any\" name=\"lon\" id=\"lon\" value={props.lon}></input>\n                        <input className=\"d-none\" readOnly type=\"number\" step=\"any\" name=\"lat\" id=\"lat\" value={props.lat}></input>\n                    </div>\n                    <div className=\"row\">\n                        <div className=\"col-sm\">\n                            <label htmlFor=\"name\">Name:</label>\n                            <input required className=\"form-control input-sm\" placeholder=\"place name\" type=\"text\" name=\"name\" id=\"name\"></input>\n                        </div>\n                        <div className=\"col-sm\">\n                            <label htmlFor=\"description\">Description:</label>\n                            <input className=\"form-control input-sm\" placeholder=\"place decription\" type=\"text\" name=\"description\" id=\"description\"></input>\n                        </div>\n                        <div className=\"col-sm\">\n                            <label htmlFor=\"type\">Select type:</label>\n                            <select className=\"form-control input-sm\" id=\"type\" name=\"type\">\n                                <option>camping</option>\n                                <option>bonfire</option>\n                                <option>view</option>\n                            </select>\n                        </div>\n                    </div>\n                    <div className=\"flexcontainer\">\n                        <button type=\"submit\" className=\"btn btn-dark btn-bg\">Add to the map</button>\n                    </div>\n                </form>\n            </div >\n\n\n    )\n}\n// className=\"d-none\"\n// action=\"http://localhost:8000/api/points\" method=\"post\"\nexport default Form;","import React from 'react';\n\nimport Form from './Form';\n\nimport camping from '../icons/039-tent.svg';\nimport bonfire from '../icons/010-bonfire.svg';\nimport viewPoint from '../icons/009-binoculars.svg';\n\nimport { MyContext } from '../contexts/MyContextProvider';\n\nimport { config } from '../url_config'\n\nimport { fromLonLat, toLonLat } from 'ol/proj';\nimport 'ol/ol.css';\nimport { Map as OlMap, View } from 'ol';\nimport TileLayer from 'ol/layer/Tile';\nimport OSM from 'ol/source/OSM';\nimport { Vector as VectorLayer } from 'ol/layer';\nimport { Vector as VectorSource } from 'ol/source';\nimport Feature from 'ol/Feature';\nimport Point from 'ol/geom/Point';\nimport { Icon, Style } from 'ol/style.js';\n\nconst url = config.url.API_URL\n\nconst iconMapping = {\n  camping: camping,\n  bonfire: bonfire,\n  view: viewPoint\n};\n\nclass Map extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = ({\n      lon: 17.862083241832443,\n      lat: 59.30184823106963\n    });\n  }\n\n  componentDidMount() {\n    const extraLayer = new VectorLayer({\n      source: new VectorSource({\n        features: []\n      })\n    });\n    const featuresLayer = new VectorLayer({\n      source: new VectorSource({\n        features: []\n      })\n    });\n\n    const map = new OlMap({\n      target: this.refs.mapContainer, //change to createRef API!!\n      layers: [\n        new TileLayer({\n          source: new OSM()\n        }),\n        extraLayer,\n        featuresLayer\n      ], view: new View({\n        center: fromLonLat([this.state.lon, this.state.lat]),\n        zoom: 11,\n      })\n    });\n    const handleMapClick = (event) => {\n      if (this.context.mode === 'explore') {\n        let pointId = null;\n        this.state.map.forEachFeatureAtPixel(event.pixel,\n          feature => {\n            pointId = feature.get('id') || null;\n          });\n\n        const newPath = pointId === null ?\n          '/location/' :\n          '/location/' + pointId;\n        this.props.history.push(newPath);\n\n      } else if (this.context.mode === 'edit') {\n        ///////drawing a point/////////\n        const coord = toLonLat(event.coordinate);\n        this.setState({\n          lon: coord[0],\n          lat: coord[1]\n        });\n\n        const features = [];\n\n        const coords = event.coordinate;\n        const newFeature = new Feature({\n          geometry: new Point(coords)\n        })\n\n        features.push(newFeature);\n\n        this.state.extraLayer.setSource(\n          new VectorSource({\n            features: features\n          })\n        );\n      }\n    }\n    map.on('click', handleMapClick);\n\n    this.setState({\n      map: map,\n      extraLayer: extraLayer,\n      featuresLayer: featuresLayer\n    });\n  }\n\n  componentDidUpdate() {\n\n    if (this.context.data === null) {\n      console.log(url + '/api/points');\n      fetch(url + '/api/points')\n        .then(res => res.json())\n        .then(data => {\n          const features = [];\n          data.forEach((e) => {\n            const icon = new Icon({\n              opacity: 1,\n              scale: 0.05,\n              src: iconMapping[e.type]\n            });\n\n            const iconStyle = new Style({\n              image: icon\n            });\n\n            const coords = fromLonLat(e.localisation);\n            const iconFeature = new Feature({\n              id: e._id,\n              geometry: new Point(coords),\n              name: e.name,\n              description: e.description,\n              rating: e.rating\n            });\n            iconFeature.setStyle(iconStyle);\n            features.push(iconFeature);\n          })\n\n          this.state.featuresLayer.setSource(\n            new VectorSource({\n              features: features\n            })\n          );\n          this.context.setData(data);\n        })\n        .catch(error => console.log(error));\n    }\n  }\n\n  render() {\n    return (\n      <div>\n        <div ref=\"mapContainer\" id=\"mapContainer\"></div>\n        <Form lon={this.state.lon} lat={this.state.lat}></Form>\n      </div>\n    );\n  }\n}\n\nMap.contextType = MyContext;\nexport default Map;","import React, { useState } from 'react'\nexport const AuthContext = React.createContext({})\n\nfunction AuthContextProvider(props) {\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n  const [user, setUser] = useState(null);\n  const [picture, setPicture] = useState(null);\n  const [jwToken, setJwToken] = useState(null);\n\n    const state = {\n      isAuthenticated,\n      setIsAuthenticated,\n      user,\n      setUser,\n      jwToken,\n      setJwToken,\n      picture,\n      setPicture\n    }\n    return (\n        <AuthContext.Provider value={state}>\n            {props.children}\n        </AuthContext.Provider>\n    )\n\n}\nexport default AuthContextProvider\n","import React, { useState, useContext, useEffect } from 'react';\nimport { config } from '../url_config'\nimport { MyContext } from '../contexts/MyContextProvider';\nimport { AuthContext } from '../contexts/AuthContextProvider';\nconst url = config.url.API_URL\n\nfunction Description(props) {\n  const context = useContext(MyContext);\n  const authContext = useContext(AuthContext);\n\n  const [reviews, setReviews] = useState('');\n  const [pointData, setPointData] = useState(null);\n\n  useEffect(() => {\n    setReviews('');\n    if (context.data) {\n      const pointData = context.data.find(e =>\n        e._id === context.pointId);\n      setPointData(pointData);\n    }\n  }, [context.data, context.pointId]);\n\n  const fetchReviews = () => {\n    fetch(url + \"/api/points/\" + context.pointId)\n      .then(res => res.json())\n      .then(res => {\n        const rev = res.map(e => {\n          return (\n            <div className=\"flexcontainercolumn\">\n              <br></br>\n              <h5>{e.title}</h5>\n              <p> {e.description} </p>\n              <h5>rated: {e.rating}</h5>\n            </div>\n          )\n        })\n        setReviews(rev);\n      });\n  }\n\n  const submitReview = (e) => {\n    e.preventDefault();\n    const dataForm = new URLSearchParams();\n    for (const pair of new FormData(e.target)) {\n      dataForm.append(pair[0], pair[1]);\n    }\n\n    fetch(url + \"/api/points/\" + context.pointId, {\n      method: 'POST',\n      headers: {\n        'Authorization': 'Bearer ' + authContext.jwToken,\n        'Content-Type': 'application/x-www-form-urlencoded'\n      },\n      body: dataForm,\n      withCredentials: true,\n      credentials: 'include'\n    })\n      .then(res => res.json())\n      .then((res) => {\n        setPointData({ ...pointData, rating: res.newRating })\n      });\n  }\n\n  return (\n    (!pointData || context.mode === 'edit') ?\n      '' :\n      <div className=\"flexcontainercolumn\">\n        <h1>\n          {pointData.name}\n        </h1>\n        <p>\n          {pointData.description}\n          <br />\n          rating: {pointData.rating}\n        </p>\n        <button type=\"click\" onClick={fetchReviews} className=\"btn btn-dark btn-sm\">Show reviews</button>\n\n        {reviews}\n\n        { authContext.isAuthenticated ? \n          <form className=\"container\" onSubmit={submitReview}>\n          <div className=\"row\">\n            <div className=\"col-sm\">\n              <label htmlFor=\"title\">Title:</label>\n              <input className=\"form-control input-sm\" placeholder=\"title\" required name=\"title\" id=\"title\"></input>\n            </div>\n            <div className=\"col-sm\">\n              <label htmlFor=\"description\">Description:</label>\n              <input className=\"form-control input-sm\" placeholder=\"description\" name=\"description\" id=\"description\"></input>\n            </div>\n            <div className=\"col-sm\">\n              <label htmlFor=\"rating\">Rating:</label>\n              <input className=\"form-control input-sm\" placeholder=\"1-10\" required min=\"1\" max=\"10\" name=\"rating\" id=\"rating\" type=\"number\"></input>\n            </div>\n          </div>\n          <div className=\"flexcontainer\">\n            <button type=\"submit\" className=\" btn btn-dark btn-bg\">Review</button>\n          </div>\n        </form> : ''\n        }\n        \n\n      </div>\n\n  )\n}\n\nexport default Description;","import React, { useContext, useEffect } from 'react';\nimport Map from '../components/Map';\nimport Description from '../components/Description';\nimport { MyContext } from '../contexts/MyContextProvider';\n\nfunction Location(props) {\n  const context = useContext(MyContext);\n  \n  useEffect(() => {\n    const pathPointId = props.location.pathname.match(/[^/]+$/) ?\n      props.location.pathname.match(/[^/]+$/)[0] : null;\n    if (context.pointId !== pathPointId) {\n      context.setPointId(pathPointId);\n    }\n  }, [props.location.pathname])\n\n\n  return (\n    <div>\n      <Map history={props.history}></Map>\n      <Description></Description>\n    </div>\n  );\n}\n\nexport default Location;","import React, { useContext } from 'react';\n\nimport Location from './Location';\nimport { Route } from 'react-router-dom';\nimport { MyContext } from '../contexts/MyContextProvider';\nimport { AuthContext } from '../contexts/AuthContextProvider';\n\n\n\nfunction App() {\n  const context = useContext(MyContext);\n  const authContext = useContext(AuthContext);\n\n  const switchText = (context.mode === 'explore') ? 'Edit map' : 'Explore';\n\n  return (\n\n    <div className=\"App\">\n      { authContext.isAuthenticated ? \n      <button id=\"switch modes\" onClick={context.switchMode}>{switchText}</button> :\n      null\n    }\n      {context.redirect}\n      <Route path=\"/\" component={Location} />\n    </div>\n  );\n}\n\nexport default App;\n","import React, { useContext, useEffect, useState } from 'react';\nimport { AuthContext } from '../contexts/AuthContextProvider';\nimport { config } from '../url_config'\nconst url = config.url.API_URL\n\n\nfunction Profile(props) {\n  const authContext = useContext(AuthContext);\n  const [profileData, setProfileData] = useState(null);\n\n  if (!authContext.isAuthenticated) {\n    props.history.push('/')\n  };\n\n  useEffect(() => {\n    fetch(url + '/api/profiles', { \n      method: 'GET',\n      withCredentials: true,\n      credentials: 'include',\n      headers: {\n        'Authorization': 'Bearer ' + authContext.jwToken\n      }\n    })\n      .then(res => res.json())\n      .then(data => {\n        setProfileData(data)\n      }\n      );\n  }, [])\n\n  return (\n\n    <div className=\"Profile\">\n      Your Profile page <br></br>\n      {profileData ?\n        'sucess' :\n        'no data'}\n\n\n    </div>\n  );\n}\n\nexport default Profile;\n","import styled from 'styled-components';\n\nexport const ProfileImage = styled.img`\n  border-radius: 100%;\n  height: 3em;\n`;\n","import React, { useContext } from 'react';\nimport App from './views/App';\nimport Profile from './views/Profile';\nimport { Route, BrowserRouter as Router, Link, Redirect, Switch } from 'react-router-dom';\nimport FacebookLogin from 'react-facebook-login';\nimport { AuthContext } from './contexts/AuthContextProvider';\nimport { MyContext } from './contexts/MyContextProvider';\nimport { ProfileImage } from './styled-components/ProfileImage';\nimport { config } from './url_config'\nconst url = config.url.API_URL\n\n\nfunction Main() {\n  const authContext = useContext(AuthContext);\n  const context = useContext(MyContext);\n\n  const logout = () => {\n    authContext.setIsAuthenticated(false);\n    authContext.setUser(null);\n    authContext.setJwToken(null);\n    context.setMode('explore');\n  };\n\n  const facebookResponse = (response) => {\n    // store data in local storage\n\n    const options = {\n      method: 'POST',\n      body: `access_token=${response.accessToken}`,\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded'\n      },\n      mode: 'cors',\n      cache: 'default'\n    };\n\n    fetch(url + '/api/auth/facebook', options) \n      .then(r => {\n        const token = r.headers.get('x-auth-token');\n        r.json().then(user => {\n          if (token) {\n            authContext.setIsAuthenticated(true);\n            authContext.setUser(user._id);\n            authContext.setJwToken(token);\n            authContext.setPicture(user.photoUrl);\n          }\n        });\n      })\n  }\n  const profileLink = authContext.picture ?\n  <ProfileImage src={authContext.picture} alt=\"Profile\" /> : 'Profile';\n\n  console.log(config.app_id.FACEBOOK_APPID);\n  return (\n    \n      <Router basename={process.env.PUBLIC_URL}>\n        <nav className=\"navbar navbar-dark bg-dark\">\n          <h1 className=\"text-light\">\n            Your Map Space\n          </h1>\n          {authContext.isAuthenticated ?\n            <button onClick={logout} className=\"button\">\n              Log out\n            </button>\n            :\n            <FacebookLogin\n              appId={config.app_id.FACEBOOK_APPID}\n              autoLoad={false}\n              fields=\"name,email,picture\"\n              callback={facebookResponse} />\n          }\n          { authContext.isAuthenticated ? <Link to='/profile'>{profileLink}</Link>\n            : ''}\n        </nav>\n\n        <Switch>\n          <Route path=\"/location\" component={App} />\n          <Route exact path=\"/\">\n            <Redirect to=\"/location\"></Redirect>\n          </Route>\n          <Route path=\"/profile\" component={Profile} />\n        </Switch>\n      </Router>\n  );\n}\n\nexport default Main;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport Main from './Main';\nimport './index.css';\nimport 'bootstrap/dist/css/bootstrap.css';\nimport AuthContextProvider from './contexts/AuthContextProvider';\nimport MyContextProvider from './contexts/MyContextProvider';\n\nReactDOM.render(\n  <MyContextProvider>\n    <AuthContextProvider>\n      <Main />\n    </AuthContextProvider>\n  </MyContextProvider>\n  , document.getElementById('root'));\n\n\n","module.exports = __webpack_public_path__ + \"static/media/039-tent.ebd03a54.svg\";","module.exports = __webpack_public_path__ + \"static/media/010-bonfire.21b76057.svg\";","module.exports = __webpack_public_path__ + \"static/media/009-binoculars.6b6a714c.svg\";"],"sourceRoot":""}